(function(b){var a=0;b.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{}},_create:function(){var e=this.element.hide(),d=this.options;this.speed=b.fx.speeds._default;this._isOpen=!1;e=(this.button=b('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(d.classes).attr({title:e.attr("title"),"aria-haspopup":!0,tabIndex:e.attr("tabIndex")}).insertAfter(e);(this.buttonlabel=b("<span />")).html(d.noneSelectedText).appendTo(e);var e=(this.menu=b("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(d.classes).appendTo(document.body),f=(this.header=b("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(e);(this.headerLinkContainer=b("<ul />")).addClass("ui-helper-reset").html(function(){return !0===d.header?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+d.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+d.uncheckAllText+"</span></a></li>":"string"===typeof d.header?"<li>"+d.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(f);(this.checkboxContainer=b("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(e);this._bindEvents();this.refresh(!0);d.multiple||e.addClass("ui-multiselect-single")},_init:function(){!1===this.options.header&&this.header.hide();this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide();this.options.autoOpen&&this.open();this.element.is(":disabled")&&this.disable()},refresh:function(j){var d=this.element,p=this.options,n=this.menu,l=this.checkboxContainer,m=[],o="",k=d.attr("id")||a++;d.find("option").each(function(v){b(this);var w=this.parentNode,u=this.innerHTML,t=this.title,r=this.value,v="ui-multiselect-"+(this.id||k+"-option-"+v),q=this.disabled,e=this.selected,g=["ui-corner-all"],c=(q?"ui-multiselect-disabled ":" ")+this.className,s;"OPTGROUP"===w.tagName&&(s=w.getAttribute("label"),-1===b.inArray(s,m)&&(o+='<li class="ui-multiselect-optgroup-label '+w.className+'"><a href="#">'+s+"</a></li>",m.push(s)));q&&g.push("ui-state-disabled");e&&!p.multiple&&g.push("ui-state-active");o+='<li class="'+c+'">';o+='<label for="'+v+'" title="'+t+'" class="'+g.join(" ")+'">';o+='<input id="'+v+'" name="multiselect_'+k+'" type="'+(p.multiple?"checkbox":"radio")+'" value="'+r+'" title="'+u+'"';e&&(o+=' checked="checked"',o+=' aria-selected="true"');q&&(o+=' disabled="disabled"',o+=' aria-disabled="true"');o+=" /><span>"+u+"</span></label></li>"});l.html(o);this.labels=n.find("label");this.inputs=this.labels.children("input");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();j||this._trigger("refresh")},update:function(){var e=this.options,d=this.inputs,h=d.filter(":checked"),g=h.length,e=0===g?e.noneSelectedText:b.isFunction(e.selectedText)?e.selectedText.call(this,g,d.length,h.get()):/\d/.test(e.selectedList)&&0<e.selectedList&&g<=e.selectedList?h.map(function(){return b(this).next().html()}).get().join(", "):e.selectedText.replace("#",g).replace("#",d.length);this.buttonlabel.html(e);return e},_bindEvents:function(){function e(){d[d._isOpen?"close":"open"]();return !1}var d=this,f=this.button;f.find("span").bind("click.multiselect",e);f.bind({click:e,keypress:function(c){switch(c.which){case 27:case 38:case 37:d.close();break;case 39:case 40:d.open()}},mouseenter:function(){f.hasClass("ui-state-disabled")||b(this).addClass("ui-state-hover")},mouseleave:function(){b(this).removeClass("ui-state-hover")},focus:function(){f.hasClass("ui-state-disabled")||b(this).addClass("ui-state-focus")},blur:function(){b(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(c){if(b(this).hasClass("ui-multiselect-close")){d.close()}else{d[b(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]()}c.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(h){h.preventDefault();var l=b(this),j=l.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),k=j.get(),l=l.parent().text();!1!==d._trigger("beforeoptgrouptoggle",h,{inputs:k,label:l})&&(d._toggleChecked(j.filter(":checked").length!==j.length,j),d._trigger("optgrouptoggle",h,{inputs:k,label:l,checked:k[0].checked}))}).delegate("label","mouseenter.multiselect",function(){b(this).hasClass("ui-state-disabled")||(d.labels.removeClass("ui-state-hover"),b(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(c){c.preventDefault();switch(c.which){case 9:case 27:d.close();break;case 38:case 40:case 37:case 39:d._traverse(c.which,this);break;case 13:b(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(h){var m=b(this),k=this.value,l=this.checked,j=d.element.find("option");this.disabled||!1===d._trigger("click",h,{value:k,text:this.title,checked:l})?h.preventDefault():(m.focus(),m.attr("aria-selected",l),j.each(function(){this.value===k?this.selected=l:d.options.multiple||(this.selected=!1)}),d.options.multiple||(d.labels.removeClass("ui-state-active"),m.closest("label").toggleClass("ui-state-active",l),d.close()),d.element.trigger("change"),setTimeout(b.proxy(d.update,d),10))});b(document).bind("mousedown.multiselect",function(c){d._isOpen&&(!b.contains(d.menu[0],c.target)&&!b.contains(d.button[0],c.target)&&c.target!==d.button[0])&&d.close()});b(this.element[0].form).bind("reset.multiselect",function(){setTimeout(b.proxy(d.refresh,d),10)})},_setButtonWidth:function(){var d=this.element.outerWidth(),c=this.options;/\d/.test(c.minWidth)&&d<c.minWidth&&(d=c.minWidth);this.button.width(d)},_setMenuWidth:function(){var d=this.menu,c=this.button.outerWidth()-parseInt(d.css("padding-left"),10)-parseInt(d.css("padding-right"),10)-parseInt(d.css("border-right-width"),10)-parseInt(d.css("border-left-width"),10);d.width(c||this.button.outerWidth())},_traverse:function(e,d){var h=b(d),g=38===e||37===e,h=h.parent()[g?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[g?"last":"first"]();h.length?h.find("label").trigger("mouseover"):(h=this.menu.find("ul").last(),this.menu.find("label")[g?"last":"first"]().trigger("mouseover"),h.scrollTop(g?h.height():0))},_toggleState:function(d,c){return function(){this.disabled||(this[d]=c);c?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(e,d){var k=d&&d.length?d:this.inputs,j=this;k.each(this._toggleState("checked",e));k.eq(0).focus();this.update();var g=k.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&-1<b.inArray(this.value,g)&&j._toggleState("selected",e).call(this)});k.length&&this.element.trigger("change")},_toggleDisabled:function(d){this.button.attr({disabled:d,"aria-disabled":d})[d?"addClass":"removeClass"]("ui-state-disabled");var c=this.menu.find("input"),c=d?c.filter(":enabled").data("ech-multiselect-disabled",!0):c.filter(function(){return !0===b.data(this,"ech-multiselect-disabled")}).removeData("ech-multiselect-disabled");c.attr({disabled:d,"arial-disabled":d}).parent()[d?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:d,"aria-disabled":d})},open:function(){var j=this.button,d=this.menu,p=this.speed,n=this.options,l=[];if(!(!1===this._trigger("beforeopen")||j.hasClass("ui-state-disabled")||this._isOpen)){var m=d.find("ul").last(),o=n.show,k=j.offset();b.isArray(n.show)&&(o=n.show[0],p=n.show[1]||this.speed);o&&(l=[o,p]);m.scrollTop(0).height(n.height);b.ui.position&&!b.isEmptyObject(n.position)?(n.position.of=n.position.of||j,d.show().position(n.position).hide()):d.css({top:k.top+j.outerHeight(),left:k.left});b.fn.show.apply(d,l);this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");j.addClass("ui-state-active");this._isOpen=!0;this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")){var e=this.options,d=e.hide,h=this.speed,g=[];b.isArray(e.hide)&&(d=e.hide[0],h=e.hide[1]||this.speed);d&&(g=[d,h]);b.fn.hide.apply(this.menu,g);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");this._isOpen=!1;this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){b.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(e,d){var f=this.menu;switch(e){case"header":f.find("div.ui-multiselect-header")[d?"show":"hide"]();break;case"checkAllText":f.find("a.ui-multiselect-all span").eq(-1).text(d);break;case"uncheckAllText":f.find("a.ui-multiselect-none span").eq(-1).text(d);break;case"height":f.find("ul").last().height(parseInt(d,10));break;case"minWidth":this.options[e]=parseInt(d,10);this._setButtonWidth();this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[e]=d;this.update();break;case"classes":f.add(this.button).removeClass(this.options.classes).addClass(d);break;case"multiple":f.toggleClass("ui-multiselect-single",!d),this.options.multiple=d,this.element[0].multiple=d,this.refresh()}b.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);(function(b){var c=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;b.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var f;var a=this,h=this.options,g=this.instance=b(this.element).multiselect("instance");this.header=g.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");f=this.wrapper=b('<div class="ui-multiselect-filter">'+(h.label.length?h.label:"")+'<input placeholder="'+h.placeholder+'" type="search"'+(/\d/.test(h.width)?'style="width:'+h.width+'px"':"")+" /></div>").prependTo(this.header),h=f;this.inputs=g.menu.find('input[type="checkbox"], input[type="radio"]');this.input=h.find("input").bind({keydown:function(d){13===d.which&&d.preventDefault()},keyup:b.proxy(a._handler,a),click:b.proxy(a._handler,a)});this.updateCache();g._toggleChecked=function(o,n){var m=n&&n.length?n:this.labels.find("input"),l=this,m=m.not(a.instance._isOpen?":disabled, :hidden":":disabled").each(this._toggleState("checked",o));this.update();var k=m.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&-1<b.inArray(this.value,k)&&l._toggleState("selected",o).call(this)})};g=b(document).bind("multiselectrefresh",function(){a.updateCache();a._handler()});this.options.autoReset&&g.bind("multiselectclose",b.proxy(this._reset,this))},_handler:function(a){var m=b.trim(this.input[0].value.toLowerCase()),l=this.rows,j=this.inputs,f=this.cache;if(m){l.hide();var k=RegExp(m.replace(c,"\\$&"),"gi");this._trigger("filter",a,b.map(f,function(e,d){return -1!==e.search(k)?(l.eq(d).show(),j.get(d)):null}))}else{l.show()}this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var d=b(this),e=d.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return"none"!==b.css(this,"display")}).length;d[e?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)");this.cache=this.element.children().map(function(){var a=b(this);"optgroup"===this.tagName.toLowerCase()&&(a=a.children());return a.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){b.Widget.prototype.destroy.call(this);this.input.val("").trigger("keyup");this.wrapper.remove()}})})(jQuery);function start_minutes(b){window["timer_"+b]=setInterval(function(){$th=$("#time_"+b);var e=$th.find(".cur_min");var d=$th.find(".cur_hours");var c=parseInt(e.val(),10);var f=parseInt(d.val(),10);if(c==59){e.val(0);d.val(f+1)}else{e.val(c+1)}update_time_value($th,d.val(),e.val());update_total_time()},60000);var a=$("#action_button_"+b);a.prop("data-tip","Stop working");a.prop("onclick","").off("click").one("click",function(){stop_timer(b)});$("#time_"+b).addClass("started");a.removeClass("start").addClass("stop")}function stop_minutes(c){var a="timer_"+c;if(typeof window[a]!=="undefined"){clearInterval(window[a])}var b=$("#action_button_"+c);b.prop("data-tip","Start working");b.prop("onclick","").off("click").one("click",function(){start_timer(c)});$("#time_"+c).removeClass("started");b.removeClass("stop").addClass("start")}function update_time_value(e,c,b){var a=pad(b,2);var d=pad(c,2);e.find(".hours").html(d);e.find(".mins").html(a)}function update_total_time(){var d=$(".total_time .hours");var c=$(".total_time .mins");var b=parseInt(d.text(),10);var a=parseInt(c.text(),10);if(a==59){a=0;b=b+1}else{a=a+1}d.html(pad(b,2));c.html(pad(a,2))}function start_timer(a){if(disable_time_buttons()){$("#time_widget_control_"+a).find(".control").trigger("click")}}function stop_timer(a){if(disable_time_buttons()){$("#time_widget_control_"+a).find(".control").trigger("click")}}function recalc_visible_totals(){var c=0;var d=0;$(".time_task:visible").each(function(){c+=parseInt($(this).find(".cur_hours").val(),10);d+=parseInt($(this).find(".cur_min").val(),10)});var b=Math.floor(d/60);var e=Math.floor(d%60);c+=b;var a=pad(e,2);var f=pad(c,2);$(".total_time .hours").html(f);$(".total_time .mins").html(a);$("#total_time").val(c*60+e)}function disable_time_buttons(){if(f_time_buttons_disabled){return false}f_time_buttons_disabled=true;return true}$(function(){$(document).on("fcif_instant_filter_applied",function(){recalc_visible_totals()});$(document).on("click",".time_task_action",function(a){if(!disable_time_buttons()){return false}})});$.goToWikiVersion=function(b,a){location.href=url_to_project_unique_name+"/wiki/view/"+b+"/"+a};$.clickVersionsCompare=function(){var a=$(".wiki_versions_checkbox").filter(":checked").length;if(a!=2){alert("Check 2 versions to compare!");return false}var b=[];$(".wiki_versions_checkbox").each(function(){if($(this).is(":checked")){b.push($(this).attr("id").split("_")[2])}});location.href=url_to_project_unique_name+"/wiki/compare/"+b[0]+"/"+b[1]};$(function(){$(".wiki_versions_checkbox").click(function(b){var a=$(".wiki_versions_checkbox").filter(":checked").length;if(a>2){alert("You can compare only 2 versions!");b.preventDefault()}})});(function(){var d,a,j,c,h,l,o,r,q,g,m,s,e,u,k,p,t,w,f,v,n=[].slice,b=[].indexOf||function(z){for(var y=0,x=this.length;y<x;y++){if(y in this&&this[y]===z){return y}}return -1};d=jQuery;d.payment={};d.payment.fn={};d.fn.payment=function(){var x,y;y=arguments[0],x=2<=arguments.length?n.call(arguments,1):[];return d.payment.fn[y].apply(this,x)};h=/(\d{1,4})/g;c=[{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:h,length:[16],cvcLength:[3],luhn:true},{type:"maestro",pattern:/^(5(018|0[23]|[68])|6(39|7))/,format:h,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:true},{type:"forbrugsforeningen",pattern:/^600/,format:h,length:[16],cvcLength:[3],luhn:true},{type:"dankort",pattern:/^5019/,format:h,length:[16],cvcLength:[3],luhn:true},{type:"visa",pattern:/^4/,format:h,length:[13,16],cvcLength:[3],luhn:true},{type:"mastercard",pattern:/^5[0-5]/,format:h,length:[16],cvcLength:[3],luhn:true},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:true},{type:"dinersclub",pattern:/^3[0689]/,format:h,length:[14],cvcLength:[3],luhn:true},{type:"discover",pattern:/^6([045]|22)/,format:h,length:[16],cvcLength:[3],luhn:true},{type:"unionpay",pattern:/^(62|88)/,format:h,length:[16,17,18,19],cvcLength:[3],luhn:false},{type:"jcb",pattern:/^35/,format:h,length:[16],cvcLength:[3],luhn:true}];a=function(z){var y,A,x;z=(z+"").replace(/\D/g,"");for(A=0,x=c.length;A<x;A++){y=c[A];if(y.pattern.test(z)){return y}}};j=function(z){var y,A,x;for(A=0,x=c.length;A<x;A++){y=c[A];if(y.type===z){return y}}};e=function(y){var D,C,B,z,A,x;B=true;z=0;C=(y+"").split("").reverse();for(A=0,x=C.length;A<x;A++){D=C[A];D=parseInt(D,10);if((B=!B)){D*=2}if(D>9){D-=9}z+=D}return z%10===0};s=function(x){var y;if((x.prop("selectionStart")!=null)&&x.prop("selectionStart")!==x.prop("selectionEnd")){return true}if(typeof document!=="undefined"&&document!==null?(y=document.selection)!=null?typeof y.createRange==="function"?y.createRange().text:void 0:void 0:void 0){return true}return false};u=function(x){return setTimeout(function(){var y,z;y=d(x.currentTarget);z=y.val();z=d.payment.formatCardNumber(z);return y.val(z)})};r=function(C){var x,y,E,A,z,D,B;E=String.fromCharCode(C.which);if(!/^\d+$/.test(E)){return}x=d(C.currentTarget);B=x.val();y=a(B+E);A=(B.replace(/\D/g,"")+E).length;D=16;if(y){D=y.length[y.length.length-1]}if(A>=D){return}if((x.prop("selectionStart")!=null)&&x.prop("selectionStart")!==B.length){return}if(y&&y.type==="amex"){z=/^(\d{4}|\d{4}\s\d{6})$/}else{z=/(?:^|\s)(\d{4})$/}if(z.test(B)){C.preventDefault();return setTimeout(function(){return x.val(B+" "+E)})}else{if(z.test(B+E)){C.preventDefault();return setTimeout(function(){return x.val(B+E+" ")})}}};l=function(z){var x,y;x=d(z.currentTarget);y=x.val();if(z.which!==8){return}if((x.prop("selectionStart")!=null)&&x.prop("selectionStart")!==y.length){return}if(/\d\s$/.test(y)){z.preventDefault();return setTimeout(function(){return x.val(y.replace(/\d\s$/,""))})}else{if(/\s\d?$/.test(y)){z.preventDefault();return setTimeout(function(){return x.val(y.replace(/\s\d?$/,""))})}}};k=function(x){return setTimeout(function(){var y,z;y=d(x.currentTarget);z=y.val();z=d.payment.formatExpiry(z);return y.val(z)})};q=function(y){var x,A,z;A=String.fromCharCode(y.which);if(!/^\d+$/.test(A)){return}x=d(y.currentTarget);z=x.val()+A;if(/^\d$/.test(z)&&(z!=="0"&&z!=="1")){y.preventDefault();return setTimeout(function(){return x.val("0"+z+" / ")})}else{if(/^\d\d$/.test(z)){y.preventDefault();return setTimeout(function(){return x.val(""+z+" / ")})}}};g=function(y){var x,A,z;A=String.fromCharCode(y.which);if(!/^\d+$/.test(A)){return}x=d(y.currentTarget);z=x.val();if(/^\d\d$/.test(z)){return x.val(""+z+" / ")}};m=function(y){var x,A,z;z=String.fromCharCode(y.which);if(!(z==="/"||z===" ")){return}x=d(y.currentTarget);A=x.val();if(/^\d$/.test(A)&&A!=="0"){return x.val("0"+A+" / ")}};o=function(z){var x,y;x=d(z.currentTarget);y=x.val();if(z.which!==8){return}if((x.prop("selectionStart")!=null)&&x.prop("selectionStart")!==y.length){return}if(/\s\/\s\d?$/.test(y)){z.preventDefault();return setTimeout(function(){return x.val(y.replace(/\s\/\s\d?$/,""))})}};f=function(y){var x;if(y.metaKey||y.ctrlKey){return true}if(y.which===32){return false}if(y.which===0){return true}if(y.which<33){return true}x=String.fromCharCode(y.which);return !!/[\d\s]/.test(x)};t=function(A){var x,y,B,z;x=d(A.currentTarget);B=String.fromCharCode(A.which);if(!/^\d+$/.test(B)){return}if(s(x)){return}z=(x.val()+B).replace(/\D/g,"");y=a(z);if(y){return z.length<=y.length[y.length.length-1]}else{return z.length<=16}};w=function(z){var x,A,y;x=d(z.currentTarget);A=String.fromCharCode(z.which);if(!/^\d+$/.test(A)){return}if(s(x)){return}y=x.val()+A;y=y.replace(/\D/g,"");if(y.length>6){return false}};p=function(y){var x,A,z;x=d(y.currentTarget);A=String.fromCharCode(y.which);if(!/^\d+$/.test(A)){return}if(s(x)){return}z=x.val()+A;return z.length<=4};v=function(B){var y,A,z,x,C;y=d(B.currentTarget);C=y.val();x=d.payment.cardType(C)||"unknown";if(!y.hasClass(x)){A=(function(){var F,E,D;D=[];for(F=0,E=c.length;F<E;F++){z=c[F];D.push(z.type)}return D})();y.removeClass("unknown");y.removeClass(A.join(" "));y.addClass(x);y.toggleClass("identified",x!=="unknown");return y.trigger("payment.cardType",x)}};d.payment.fn.formatCardCVC=function(){this.payment("restrictNumeric");this.on("keypress",p);return this};d.payment.fn.formatCardExpiry=function(){this.payment("restrictNumeric");this.on("keypress",w);this.on("keypress",q);this.on("keypress",m);this.on("keypress",g);this.on("keydown",o);this.on("change",k);this.on("input",k);return this};d.payment.fn.formatCardNumber=function(){this.payment("restrictNumeric");this.on("keypress",t);this.on("keypress",r);this.on("keydown",l);this.on("keyup",v);this.on("paste",u);this.on("change",u);this.on("input",u);this.on("input",v);return this};d.payment.fn.restrictNumeric=function(){this.on("keypress",f);return this};d.payment.fn.cardExpiryVal=function(){return d.payment.cardExpiryVal(d(this).val())};d.payment.cardExpiryVal=function(A){var B,z,x,y;A=A.replace(/\s/g,"");y=A.split("/",2),B=y[0],x=y[1];if((x!=null?x.length:void 0)===2&&/^\d+$/.test(x)){z=(new Date).getFullYear();z=z.toString().slice(0,2);x=z+x}B=parseInt(B,10);x=parseInt(x,10);return{month:B,year:x}};d.payment.validateCardNumber=function(y){var x,z;y=(y+"").replace(/\s+|-/g,"");if(!/^\d+$/.test(y)){return false}x=a(y);if(!x){return false}return(z=y.length,b.call(x.length,z)>=0)&&(x.luhn===false||e(y))};d.payment.validateCardExpiry=function(B,y){var z,x,A;if(typeof B==="object"&&"month" in B){A=B,B=A.month,y=A.year}if(!(B&&y)){return false}B=d.trim(B);y=d.trim(y);if(!/^\d+$/.test(B)){return false}if(!/^\d+$/.test(y)){return false}if(!((1<=B&&B<=12))){return false}if(y.length===2){if(y<70){y="20"+y}else{y="19"+y}}if(y.length!==4){return false}x=new Date(y,B);z=new Date;x.setMonth(x.getMonth()-1);x.setMonth(x.getMonth()+1,1);return x>z};d.payment.validateCardCVC=function(y,z){var x,A;y=d.trim(y);if(!/^\d+$/.test(y)){return false}x=j(z);if(x!=null){return A=y.length,b.call(x.cvcLength,A)>=0}else{return y.length>=3&&y.length<=4}};d.payment.cardType=function(x){var y;if(!x){return null}return((y=a(x))!=null?y.type:void 0)||null};d.payment.formatCardNumber=function(z){var y,x,B,A;y=a(z);if(!y){return z}B=y.length[y.length.length-1];z=z.replace(/\D/g,"");z=z.slice(0,B);if(y.format.global){return(A=z.match(y.format))!=null?A.join(" "):void 0}else{x=y.format.exec(z);if(x==null){return}x.shift();x=d.grep(x,function(C){return C});return x.join(" ")}};d.payment.formatExpiry=function(y){var A,B,x,z;B=y.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);if(!B){return""}A=B[1]||"";x=B[2]||"";z=B[3]||"";if(z.length>0||(x.length>0&&!(/\ \/?\ ?/.test(x)))){x=" / "}if(A.length===1&&(A!=="0"&&A!=="1")){A="0"+A;x=" / "}return A+x+z}}).call(this);
/*!
 * jQuery TextChange Plugin
 * http://www.zurb.com/playground/jquery-text-change-custom-event
 *
 * Copyright 2010, ZURB
 * Released under the MIT License
 */
(function(b){b.event.special.textchange={setup:function(){b(this).data("lastValue",this.contentEditable==="true"?b(this).html():b(this).val());b(this).bind("keyup.textchange",b.event.special.textchange.handler);b(this).bind("cut.textchange paste.textchange input.textchange",b.event.special.textchange.delayedHandler)},teardown:function(){b(this).unbind(".textchange")},handler:function(){b.event.special.textchange.triggerIfChanged(b(this))},delayedHandler:function(){var a=b(this);setTimeout(function(){b.event.special.textchange.triggerIfChanged(a)},25)},triggerIfChanged:function(d){var c=d[0].contentEditable==="true"?d.html():d.val();c!==d.data("lastValue")&&(d.trigger("textchange",[d.data("lastValue")]),d.data("lastValue",c))}};b.event.special.hastext={setup:function(){b(this).bind("textchange",b.event.special.hastext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.hastext.handler)},handler:function(d,a){a===""&&a!==b(this).val()&&b(this).trigger("hastext")}};b.event.special.notext={setup:function(){b(this).bind("textchange",b.event.special.notext.handler)},teardown:function(){b(this).unbind("textchange",b.event.special.notext.handler)},handler:function(d,a){b(this).val()===""&&b(this).val()!==a&&b(this).trigger("notext")}}})(jQuery);var notifier={};notifier.HasSupport=function(){if(!window.webkitNotifications){return false}if(window.webkitNotifications.checkPermission()!=0){return false}return true};var notifications_count=0;var curr_title=document.title;function open_notification(c,e){var d=jQuery.parseJSON(c);if(d.user_id!=userid){var f=$("#notification_container");var a="";a+='<p style="padding:10px; color:#fff; font-family:Arial; text-shadow:0px 1px 0px #000;">';a+=d.message;a+="</p>";var b=$('<div style="display:none"></div>');b.html(a).bind("click",function(){window.location.href=d.href});f.append(b).show();if(notifier.HasSupport()){chromeNotify(d.message)}flashTitle(d.message);$(b).fadeIn(700).delay(e).fadeOut(1000)}}function chromeNotify(d){if(!notifier.HasSupport()){return}var c="http://images.fzilla.com/images/chromenoti.png";var e="Freedcamp Notification";var a=d;var b=window.webkitNotifications.createNotification(c,e,a);b.onclick=function(f){window.focus();this.cancel()};b.show();setTimeout(function(){b.cancel()},"9000")}$(function(){$("#show_button").click(function(){if(window.webkitNotifications.checkPermission()==0){open_notification('{"message":"test222"}',2000)}else{window.webkitNotifications.requestPermission()}})});(function(){var a=document.title;var b;window.flashTitle=function(d,c){function e(){document.title=(document.title==a)?d:a;if(--c>0){b=setTimeout(e,1000)}}c=parseInt(c,10);c=(c%2==0)?c:c+1;if(isNaN(c)){c=6}clearTimeout(b);e()};window.cancelFlashTitle=function(){clearTimeout(b);document.title=a}}());if(typeof fc==="undefined"){var fc={}}if(typeof CKEDITOR_BASEPATH==="undefined"){var CKEDITOR_BASEPATH=""}if(typeof cdn_url==="undefined"){var cdn_url=""}fc.started_ts=new Date();var ckeditor_min_toolbar=[["Bold","Italic","Underline","Strike","-","Outdent","Indent","Blockquote","-","Link","-","Maximize","-","Source","RemoveFormat"]];var ckeditor_std_toolbar=[["Bold","Italic","Underline","Strike","-","NumberedList","BulletedList","Outdent","Indent","Blockquote","-","Link","Unlink","-","Format","JustifyLeft","JustifyCenter","JustifyRight","-","Maximize","-","Source","RemoveFormat","Mentions"]];var ckeditor_ext_toolbar=[{name:"clipboard",groups:["clipboard","undo"],items:["PasteText","PasteFromWord"]},{name:"editing",groups:["find","selection","spellchecker"],items:["Find","Replace","-","SelectAll","-"]},{name:"insert",items:["Image","Syntaxhighlight","Table","HorizontalRule","SpecialChar","Iframe"]},{name:"document",groups:["mode","document","doctools"],items:["Source","-","Preview"]},"/",{name:"basicstyles",groups:["basicstyles","cleanup"],items:[]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"],items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl","Language"]},"/",{name:"styles",items:["Format","Bold","Italic","Underline","Strike","RemoveFormat","Styles"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks"]},{name:"action",items:["Undo","Redo"]}];var ckeditor_remove_plugins="pastefromword, pastetext";var ckeditor_remove_plugins_advanced="";var ckeditor_extraPlugins="autosave,mentions";var ckeditor_extra_allowed_content="table {border-collapse, border}; tr; a [id, name];th td [colspan]{font-size, font-weight, color, text-align, border, padding}; table iframe img[src, alt, height, width]{height, width}; pre (brush*); span(fc_mention)[data-mtype, data-id]; a[data-mtype, data-id];";var autosave_saveDetectionSelectors="input[type='submit'], a.cancel, a.cancel_edit";var ckeditor_standard_options={toolbar:ckeditor_std_toolbar,uiColor:"#F0F0F0",autoGrow_bottomSpace:"10",autoGrow_maxHeight:300,height:"100px",width:"95%",fillEmptyBlocks:false,IgnoreEmptyParagraphValue:true,AutoParagraph:false,indentClasses:["ck_indent1","ck_indent2","ck_indent3"],contentsCss:[CKEDITOR_BASEPATH+"contents.css?ver=2",cdn_url+"platform/css/editor.css",CKEDITOR_BASEPATH+"plugins/mentions/contents.css"],disableNativeSpellChecker:false,removePlugins:ckeditor_remove_plugins,extraAllowedContent:ckeditor_extra_allowed_content,extraPlugins:ckeditor_extraPlugins,autosave_saveDetectionSelectors:autosave_saveDetectionSelectors,autosave_messageType:"statusbar",autosave_delay:10};var ckeditor_advanced_options={toolbar:ckeditor_ext_toolbar,uiColor:"#F0F0F0",autoGrow_bottomSpace:"10",autoGrow_maxHeight:300,height:"400px",width:"95%",fillEmptyBlocks:false,IgnoreEmptyParagraphValue:true,AutoParagraph:false,contentsCss:[CKEDITOR_BASEPATH+"contents.css?ver=2",cdn_url+"platform/css/editor.css",CKEDITOR_BASEPATH+"plugins/mentions/contents.css",cdn_url+"platform/css/editor_wiki.css"],disableNativeSpellChecker:false,removePlugins:ckeditor_remove_plugins_advanced,extraAllowedContent:ckeditor_extra_allowed_content,extraPlugins:ckeditor_extraPlugins,autosave_saveDetectionSelectors:autosave_saveDetectionSelectors,autosave_messageType:"statusbar",autosave_delay:10};function ajaxRequest(c,h,g,e){var e=e||{};var f=e.f_form_data;var d="POST";if(!empty(e.type)){d=e.type}if(typeof h=="function"){g=h;h={}}var a={};a.is_ajax=true;a.time_on_page=Math.round((new Date()-fc.started_ts)/1000);if(f){a=h}else{for(i in h){if(!h.hasOwnProperty(i)){continue}a[i]=h[i]}}var b={url:c,dataType:"json",data:a,type:d,cache:false,success:function(k){if(typeof e["$form"]!=="undefined"){e["$form"].trigger("formSubmitFinished")}if(k.additional_params){var j=k.additional_params;if(j.reload_page){window.location.reload();return}if(j.redirect){location.href=j.redirect;return}if(j.step_link){load_step(j.step_link)}}if(k.status=="success"){if(!empty(g)){g(k)}}else{if(k.status=="error"){fc.ajax(false);$("#temp_cover_ajax").remove();if(k.data.errors){$.each(k.data.errors,function(l,m){fc.showValidationMessage(m.field,m.error_message)});if(!empty(k.data.success)){$.each(k.data.success,function(l,m){fc.clearValidationMessage(m.field)})}}if(e.onError&&typeof e.onError=="function"){e.onError(k)}else{if(!empty(k.message)){if(!empty(k.data)){if(!empty(k.data.error_source)&&k.data.error_source=="marketplace"){fc.displayError({title:"",content:k.message,error_id:""},8000)}else{fc.displayError({title:smth_wrong_detailed_str,content:smth_wrong_sorry_str,error:k.message,error_id:k.data.error_id},8000)}}else{fc.displayError({title:smth_wrong_str,content:k.message,error:"",error_id:""},8000)}}}}else{fc.registerError('Unsupported ajax response status"'+k.status+'"',c)}}fc.enableForm()},error:function(k,m,l){fc.enableForm();if(k.status!=399){var j={};j.type="ajax() error";j.text_status=m;j.error_thrown=l;j.err_status=k.status;j.response=k.responseText;if(a.password){a.password="cleared"}j.request_params=a;if(k.responseText.indexOf("Fatal error: Allowed")+1){j.url=c;fc.registerError(j,c,0,"fatal")}else{fc.registerError(j,c)}}}};if(f){b.contentType=false;b.processData=false}$.ajax(b)}fc.disableForm=function(a){if(fc.forbidFormSubmit(a)){a.find("input[type=submit]").prop("disabled",true);return true}return false};fc.enableForm=function(){if(!$("input[type=submit], .submitBtn").length){return}$("input[type=submit], .submitBtn").prop("disabled",false);$("input[type=submit], .submitBtn").removeClass("disabled");$("button.btn.btn-disabled").removeClass("btn-disabled");$("#temp_cover_ajax").remove();$(".loader_img").hide();fc.allowFormSubmit("form");fkit.initiatePlugins()};fc.forbidFormSubmit=function(a){if($(a).data("f_no_submit")){return false}$(a).data("f_no_submit",true);return true};fc.allowFormSubmit=function(a){$(a).data("f_no_submit",false)};fc.showRestoreSession=function(){try{$(".lighten").attr("style","");var a=$(".flash_message");var b=session_expired_str;b+='<br><br><form action="'+base_url+'login?just_login" class="fkit_form quick_login_form" method="POST"><fieldset>';b+='\n<div class="group multi_column"><div class="group group_block"><field><input type="text" name="username" placeholder="'+email_word_str+'" required="required" id="username_input" class="text"></field></div>';b+='\n<div class="group group_block"><field><input type="password" name="password" placeholder="'+password_word_str+'" required="required" id="password_input" class="text"></field></div>';b+='\n<div class="group group_block"><field><input value="'+login_word_str+'" type="submit" tabindex="7" class="submitBtn btn btn-neutral"></field></div></div>';b+='\n<div class="group"><label for="remember_me">Remember Me</label><field><label><div class="option"><input type="checkbox" id="remember_me" name="remember" checked="checked"> <span class="checkbox"></span></div></label></field>';b+="\n</fieldset></form>";b="<div class='restore_session_form'>"+b+"</div>";a.html(b).removeClass("alert-info").addClass("alert-warning");a.slideDown()}catch(c){return}};fc.showValidationMessage=function(b,c){var a=$('form:not(".fkit_form") [name="'+b+'"]').parent().find("span.error_message");if(!empty(a.length)){a.html(c)}else{$('form:not(".fkit_form") [name="'+b+'"]').addClass("error").parent().append('<span class="error_message">'+c+"</span>")}};fc.clearValidationMessage=function(a){$('form:not(".fkit_form") [name="'+a+'"]').removeClass("error").parent().find("span.error_message").html("")};fc.showInfoEmailInPopup=function(b){var a=$(b).data("href");ajaxRequest(a,{},function(d){var c=d.data.html;if(!$("#email_in_dialog_wrapper").length){$("body").append('<div id="email_in_dialog_wrapper"></div>')}$("#email_in_dialog_wrapper").html("");$("#email_in_dialog_wrapper").append(c);$(".lighten").css("opacity","1").fadeIn();$("#email_in_dialog").fadeIn()},{type:"GET"})};fc.makeEmailInAddress=function(e){var b=e.attr("data-project_name"),d=e.attr("data-hash"),a=e.attr("data-incoming_emails_domain"),c=e.attr("data-application");if(!c){c="[tasks|discussions|files|issues]"}var f='"'+b+'" <'+d+"+"+c+"@"+a+">";e.attr("value",f)};fc.copyEmailInAddressToClipboard=function(a){a.select();try{document.execCommand("copy");if(typeof toastr!=="undefined"){toastr.info("Email is copied to the clipboard!")}else{$(".flash_message").html("Email is copied to the clipboard!").slideDown().delay(2000).slideUp()}if($("#email_in_dialog").length){close_email_in_dialog()}if(!$("#lns_usage_info").is(":visible")){$("#lns_usage_info").fadeIn()}}catch(b){if(typeof toastr!=="undefined"){toastr.info("Please copy email now")}else{$(".flash_message").html("Please copy email now").slideDown().delay(2000).slideUp()}return false}a.removeAttr("value")};function empty(a){return a==0||!a||(typeof(a)=="object"&&$.isEmptyObject(a))}function intval(a){a=parseInt(a,10);return a?a:0}function floatVal(a){a=parseFloat(a);return a?a:0}$(window).on("beforeunload",function(b){if(typeof unsaved_page_str==="undefined"){return}var a=unsaved_page_str;if(!fc.needUnsavedAlert()){return}(b||window.event).returnValue=a;return a});fc.needUnsavedAlert=function(){if(fc.invite_changes_count){fc.logEvent("invites","unsaved");return true}var a=$(".add_comments_content");if(!a.length){return false}var c=a.attr("id");if(!c){return false}var b=CKEDITOR.instances[c].document.getBody().getText();if(!$.trim(b).length){return false}return true};(function(a){a.fn.serializeFormJSON=function(){var c={};var b=this.serializeArray();a.each(b,function(){if(c[this.name]!==undefined){if(!c[this.name].push){c[this.name]=[c[this.name]]}c[this.name].push(this.value||"")}else{c[this.name]=this.value||""}});return c}})(jQuery);function load_step(a){ajaxRequest(a,{},function(b){$(".modal .form").html("").append(b.data.html)},{type:"GET"})}fc.logged_errors_count=0;fc.registerError=function(c,e,d,g){var f=15;if(fc.logged_errors_count>f){return}else{if(fc.logged_errors_count===f){c="Blocking repeatedly sent errors by JS"}}fc.logged_errors_count++;e=e||location.href;d=d||0;g=g||"info";if(fc.alert_js_errors&&!c.log_event&&!JSON.stringify(c).indexOf("not compatible with Quirks Mode")){alert(JSON.stringify(c))}if(typeof c==="object"){if((("error" in c)&&c.error==="Script error.")&&(("file_url" in c)&&c.file_url==="")&&(("line" in c)&&c.line=="0")&&(("column" in c)&&c.column==="")){if(!d){fc.displayError({title:smth_wrong_str,content:smth_wrong_sorry_str,error:"",error_id:0},8000)}return}}var a={};a.error_info=c;a.request_uri=e;a.level=g;var b=base_url+"register_error";$.ajax({url:b,dataType:"json",data:a,type:"POST",success:function(h){if(!d){var j=intval(h.data.error_id);fc.displayError({title:smth_wrong_detailed_str,content:h.message,error:c,error_id:j},8000)}},error:function(){if(!d){fc.displayError({title:smth_wrong_str,content:smth_wrong_sorry_str,error:"",error_id:0},8000)}}})};fc.displayError=function(d,b){if(empty(b)){b=8000}var c=$("#alert_container");var a='<a id="close_alert_container" class="close-alert"></a>';a+="<div><strong>"+d.title;if(!empty(d.error_id)){a+=' <a style="color:#fff;" title="'+d.error+'">#'+d.error_id+"</a>"}else{if(!empty(d.error)){a+=' <a style="color:#fff;" title="'+d.error+'">'+d.error+"</a>"}}a+='</strong></div><div class="container_message">'+d.content.replace(/\n/g,"<br />").replace("\n","<br />").replace("\n","<br />")+"</div>";c.html(a);c.slideDown().delay(b).slideUp(700)};$(function(){$(document).on("click","#close_alert_container",function(a){$("#alert_container").stop().slideUp()});$(document).on("click",".delete",function(a){a.preventDefault();a.stopPropagation();$th=$(this);if(!$(this).hasClass("disabled")){fc.confirmDialog($th,($th.data("callback"))?$th.data("callback"):$th.attr("href"))}});$(document).on("click",function(a){if($("#confirm_dialog").is(":visible")){if(!$(a.target).parents("#confirm_dialog").length){$(".forced_visible").removeClass("forced_visible");$("#confirm_dialog").fadeOut()}}});$(document).on("click","a.view, a.back_to_app, a.action_edit, ul.col_r_menu li > a",function(a){if(!$(this).hasClass("clear-filters")){a.preventDefault();window.location=$(this).attr("href")+window.location.hash}});$(document).on("click","#email_in_dialog_generator",function(a){a.preventDefault();var b=$(this);fc.showInfoEmailInPopup(b)});$(document).on("click",".email_in_copy_email",function(c){c.preventDefault();var b=$(this).data("project_id");var a=$("#project_id_"+b+"_email");fc.makeEmailInAddress(a);fc.copyEmailInAddressToClipboard(a)});$(document).on("click",".activate_picker",function(){window.scrollTo(0,0);$(".color").focus()});if(typeof log_vz!=="undefined"){setTimeout(function(){fc.log_vz(log_vz)},2000)}});fc.confirmDialog=function(a,f){$dialog=$("#confirm_dialog");$dialog.removeClass("right");var e=a.offset().left-18;var c=a.height();if((e+$dialog.width())>=$(window).width()){$dialog.addClass("right");e=a.offset().left-100}else{if(a.data("confcenter")){e=a.offset().left+((a.outerWidth()-$dialog.outerWidth())/2)+20;c=a.outerHeight()}}var b=$();if(a.data("forcevisible")){var d=a.data("forcevisible");if(d==="self"){b=a}else{b=$(a.data("forcevisible"))}$(".forced_visible").removeClass("forced_visible");b.addClass("forced_visible")}$dialog.css({left:e,top:a.offset().top+c}).fadeIn();$("#confirm_dialog .yes, #confirm_dialog .no").unbind("click");$("#confirm_dialog .yes").bind("click",function(g){g.preventDefault();g.stopPropagation();if(typeof window[f]=="function"){window[f](a)}else{if(typeof f=="function"){f(a)}else{window.location=f}}$dialog.fadeOut();b.removeClass("forced_visible")});$("#confirm_dialog .no").bind("click",function(g){g.preventDefault();$("#confirm_dialog .yes, #confirm_dialog .no").unbind("click");$dialog.fadeOut();b.removeClass("forced_visible")});$("#confirm_dialog .yes").focus()};fc.confirm_dialog_loading=false;fc.getBrowser=function(){if(!!window.chrome){return"chrome"}if(typeof InstallTrigger!=="undefined"){return"firefox"}var a=window.navigator.userAgent;if(a.indexOf("MSIE ")>0||a.indexOf("Trident/")>0||a.indexOf("Edge/")>0){return"msie"}return"unknown"};window.onerror=function(g,c,b,e,h){e=e||"";var a="";if(h){try{a=JSON.stringify(h)}catch(f){a="Exception when stringifying error object ."}}var d={error:g,file_url:c,line:b,column:e,err_obj:a,javascript_error:true};var c=location.href;fc.registerError(d,c,true)};fc.show_and_reset_popover_position=function(b,e){var a=b.offset();var d=(a.top-e.outerHeight())-10;var c=(a.left-(e.outerWidth()/2)+(b.outerWidth()/2));e.css({top:d+"px",left:c+"px"});e.fadeIn(150);fc.outer_click_type="user_popover";return true};fc.showMentionsPopover=function(a,b){$(".mention_popover").fadeOut(150).promise().always(function(){if(!$("#popover_user"+a).length){ajaxRequest("/profiles/get_user_popover/"+a,"",function(c){$("body").append(c.data);fc.show_and_reset_popover_position(b,$("#popover_user"+a))})}else{fc.show_and_reset_popover_position(b,$("#popover_user"+a))}})};$(function(){fc.process_url_hash();$(document).on("click",".click-to-scroll",function(d){$elem=$($.attr(this,"href"));if($elem.length>0){fc.highlight_elements($elem);$("html, body").animate({scrollTop:$elem.offset().top-20},1000)}});$(document).on("click",".scroll_top",function(f){f.preventDefault();if($(".scroll-top-bottom-nav").length&&!$(".item-header-group.sticky").length){var d=$(".scroll-top-bottom-nav").data("comment-id");if(d==0){$("html, body").animate({scrollTop:$(document).height()},"slow")}else{fc.scroll_to_element($("#comment-"+d),false)}}else{$("html, body").animate({scrollTop:0},"slow")}return false});if($(".item-title-group").length&&!fc.isMobileVersion){var c=$(".two-up").height();var a=$(".item-header-group").height();function b(){var g=$(".item-wrap"),k=g.offset(),h=$(window).scrollTop(),f=$(".item-header-group"),j=$(".scroll-top-bottom-nav .fkit_tip.tooltipstered"),e=$(".scroll-top-bottom-nav .bubble");if(h>k.top+$(".two-up").height()){j.tooltipster("content",j.data("top"));e.hide();f.width(g.width()).addClass("sticky");var l=5;$(".item-header-group-plholder").height(a+l);if(!c){if($(".item-bar").length){$(".item-title-group").addClass("no_border")}return}var d=h-k.top;if(d<c){$(".two-up").stop().show();$(".two-up").height(c-d);$(".item-title-group").removeClass("no_border")}else{$(".two-up").stop().hide().height(0);if($(".item-bar").length){$(".item-title-group").addClass("no_border")}}}else{j.tooltipster("content",j.data("bottom"));e.show();if($(".two-up").height()<c){$(".two-up").show();$(".two-up").stop().animate({height:c},100)}if($(".item-bar").length){$(".item-title-group").removeClass("no_border")}$(".item-header-group-plholder").height(0);f.removeClass("sticky");f.attr("style","")}}$(window).scroll(b).trigger("scroll")}$(document).on("mouseenter",".folding_header",function(){if($(this).hasClass("custom")){return}$(this).addClass("hover")});$(document).on("mouseleave",".folding_header",function(){$(this).removeClass("hover")});$(document).on("click",".folding_header",function(h){if($(this).hasClass("custom")){return}var g=$(this).find("a.slidedown");var f=g.data("href");if(f&&!g.parents(".folding_header").siblings(".folding_body").length){var d={};d.item_id=g.data("item-id");ajaxRequest(f,d,function(e){if(e.status=="success"){$(e.data.html).insertAfter(g.parents(".folding_header"));g.addClass("opened");g.parents(".folding_header").siblings(".folding_body").slideDown()}})}else{if(g.parents(".folding_header").siblings(".folding_body").is(":visible")){g.parents(".folding_header").siblings(".folding_body").slideUp();g.removeClass("opened")}else{g.addClass("opened");g.parents(".folding_header").siblings(".folding_body").slideDown()}}});$("body").on("click",".fc_mention",function(g){g.stopPropagation();var f=$(this);if("user"!==f.data("mtype")){return}var d=f.data("id");if(!d){return}fc.showMentionsPopover(d,f)});fc.user_popover_close=function(f){var d=$(".mention_popover");if(d.length>0&&!d.is(f.target)&&d.has(f.target).length===0){d.fadeOut(150);fc.outer_click_type=null}}});jQuery.fn.extend({insertAtCaret:function(a){return this.each(function(d){if(document.selection){this.focus();var e=document.selection.createRange();e.text=a;this.focus()}else{if(this.selectionStart||this.selectionStart=="0"){var c=this.selectionStart;var b=this.selectionEnd;var f=this.scrollTop;this.value=this.value.substring(0,c)+a+this.value.substring(b,this.value.length);this.focus();this.selectionStart=c+a.length;this.selectionEnd=c+a.length;this.scrollTop=f}else{this.value+=a;this.focus()}}})}});function addInsertImageBlock(e,h,a){var d=$("#uploaded_file_"+e);var f=$("<div class='insert_image_block' data-fileID='"+e+"' data-editorID='"+h+"'><div class='insert-text'>Insert Image</div> </div>");var c=$("<a href='#' class='insert_image_link' data-size='thumb'>"+embed_thumb_str+"</a>");if(a=="storage"){var b=$("<a href='#' class='insert_image_link' data-size='medium'>"+embed_medium_str+"</a>");var g=$("<a href='#' class='insert_image_link' data-size='full'>"+embed_full_str+"</a>");f.append(c,b,g)}else{f.append(c)}d.append(f)}function getFCAttachHtml(b,a){return" [fcattach="+b+" type=img size="+a+"]"}function insertAttachmentTag(c){var f=c.parents(".insert_image_block");var b=f.attr("data-fileID");var e=f.attr("data-editorID");var a=c.attr("data-size");var d=getFCAttachHtml(b,a);CKEDITOR.instances[e].insertHtml(d);CKEDITOR.instances[e].execCommand("enter");if($(".file_dialog_list_wrap").length){fc.hideFileDialog()}}function removeAttachmentFromText(d,e){var c=CKEDITOR.instances[e];var b=c.getData();var a=new RegExp("\\[fcattach="+d+".*?\\]","g");b=b.replace(a,"");c.setData(b);c.updateElement()}function initAttachmentsInText(){$(document).off("click",".insert_image_link");$(document).on("click",".insert_image_link",function(a){insertAttachmentTag($(this));return false})}function confirmGroupDelete(f,k,d){f.preventDefault();var c=d.parents(".view_group").find(".group_name").text();$("#group_name").text(c);$("#entity_name").text(k);$(".delete_link_clicked").removeClass("delete_link_clicked");d.addClass("delete_link_clicked");var j=$("#del_c_dialog").data("init-css-top");if(typeof j=="undefined"){j=parseInt($("#del_c_dialog").css("top"));$("#del_c_dialog").data("init-css-top",j)}var a=j;if(!d.parents("div.modal").scrollTop()){var g=parseInt(d.parents("div.modal").outerHeight());var b=parseInt($("#del_c_dialog").outerHeight());var h=parseInt(j)+b;if(h>g){a=parseInt((g-b)/2)}}else{a+=d.parents("div.modal").scrollTop()}$("#del_c_dialog").css("top",a);show_del_c_dialog()}(function(a){a.fn.tipr=function(b){var c=a.extend({speed:200,mode:"bottom"},b);return this.each(function(){var d=".tipr_container_"+c.mode;a(this).hover(function(){var j=c.mode;if(a(this).attr("data-mode")){j=a(this).attr("data-mode");d=".tipr_container_"+j}var e='<div class="tipr_container_'+j+'"><div class="tipr_point_'+j+'"><div class="tipr_content">'+a(this).attr("data-tip")+"</div></div></div>";a(this).append(e);var f=a(d).outerWidth();var h=a(this).width();var g=(h/2)-(f/2);a(d).css("margin-left",g+"px");a(this).removeAttr("title alt");a(d).fadeIn(c.speed)},function(){a(d).remove()})})}})(jQuery);fc.handlePrivateStuff=function(){$(document).on("mouseenter",".private_users_link",function(){$(this).parents(".private_users").find(".users_list").stop().fadeTo("10",0.8)});$(document).on("mouseleave",".private_users_link",function(){$(this).parents(".private_users").find(".users_list").stop().fadeOut(400)})};fc.hashToArray=function(){var c=window.location.hash.slice(1);if(typeof atob=="function"){c=atob(c)}var e=c.split("&");var a,d={};for(var b=0;b<e.length;b+=1){a=e[b].split("=");if(!empty(a[0])){d[a[0]]=a[1]}}return d};fc.arrayToHash=function(d){var b;var c=[];for(var a in d){if(d[a]!==undefined){c.push(a+"="+d[a])}else{c.push(a)}}b=c.join("&");if(typeof btoa=="function"){b=btoa(b)}window.location.hash=b};fc.addToHash=function(a,b){hash_array=fc.hashToArray();hash_array[a]=b;fc.arrayToHash(hash_array)};fc.callWhenReady=function(b,a,c){if(b()){a();return}var d=c+"_callWhenReady";if(typeof window[d]==="undefined"){window[d]=0}window[d]++;if(window[d]<20){setTimeout(function(){fc.callWhenReady(b,a,c)},200);return}else{var e=c+" cannot be called - not ready.";if(fc.debug_info){e+=" Debug info: "+fc.debug_info}window[d]=0;fc.debug_info="";fc.registerError(e,false,true)}};fc.selectText=function(b){if(b.is("input:text")){b[0].select();return}var d=b[0];if(document.body.createTextRange){var a=document.body.createTextRange();a.moveToElementText(d);a.select()}else{if(window.getSelection){var c=window.getSelection();var a=document.createRange();a.selectNodeContents(d);c.removeAllRanges();c.addRange(a)}}};fc.removeHighlightAfterFinish=function(a){if(!a.hasClass("highlighted")){return}if(a.css("background-color")==="rgb(255, 255, 255)"){a.removeClass("highlighted");return}setTimeout(function(){fc.removeHighlightAfterFinish(a)},10)};fc.highlight_elements=function(a){fc.triggerAnimation(a,"highlighted")};fc.triggerAnimation=function(b,a){$("."+a).removeClass(a);b.filter(":visible").each(function(){var c=this;c.style.webkitAnimationName="";c.style.nimationName="";setTimeout(function(){$(c).addClass(a);if(a==="highlighted"){setTimeout(function(){fc.removeHighlightAfterFinish($(c))},50)}},20)})};fc.processBubbleErrors=function(c,a){a=(a)?a:"#";$(".error_bubble").each(function(){var d=(a==="#")?$(this).data("id"):$(this).attr("name");if(typeof c[d]==="undefined"){c[d]=""}});for(var b in c){fc.bubbleError($(".error_bubble, #wizard_step").find(a+b),c[b])}$("html, body").animate({scrollTop:0},"slow")};var bubble_timeouts={};fc.bubbleError=function(b,c,d){d=d||10000;var a=b.siblings(".error_bubble");if(!a.length){a=$("<div></div>");a.data("id",b.attr("id"));a.addClass("error_bubble hide");if(b.hasClass("bubble_block")){b.append(a)}else{b.parents(".bubble_block").append(a)}bubble_timeouts[b.attr("id")]=0}else{clearTimeout(bubble_timeouts[b.attr("id")])}if(!c){if(a.is(":visible")){a.fadeOut("fast")}return}a.html(c);if(c&&!a.is(":visible")){a.fadeIn()}bubble_timeouts[b.attr("id")]=setTimeout(function(){a.fadeOut("slow",function(){a.remove()});delete bubble_timeouts[b.attr("id")]},d+Math.random()*1000);return};fc.isEmpty=function(a){if(typeof a==="undefined"||typeof a==="null"){return false}else{if(typeof a==="object"){var b=a.length;if(b!==0){b=Object.keys(a).length}return !!b}else{return false}}};fc.app_srch_orig_left=null;fc.app_srch_orig_width=null;var srch_hide_started=false;fc.hideSearch=function(){$("#fc_project_search").data("phrase","");$(".srch_res_cntr .searching").removeClass("searching").data("phrase","");if($(".srch_res_cntr").is(":visible")&&!srch_hide_started){srch_hide_started=true;$("#fc_project_searchText").val("");if($("body").hasClass("fc_side_minimized_hide")){$("#fc_search_results").slideUp("fast",function(){srch_hide_started=false;$(".srch_res_cntr").hide("slide",{direction:"left"},300,function(){$(this).attr("style","")})})}else{$("#fc_search_results").slideUp("fast",function(){$(".clear_search").fadeOut(function(){$(this).attr("style","")});srch_hide_started=false})}fc.outer_click_type=null}};fc.showSearch=function(a){var b=$(".srch_res_cntr");if($("body").hasClass("fc_side_minimized_hide")){if(fc.isTabletScreen()){b.show();$("ul.app li.search-form").fadeIn();$("#fc_project_searchText").focus()}else{b.show("slide",{direction:"left"},300)}fc.outer_click_type="project_search"}else{}};fc.hideFileDialog=function(){$(".file_dialog_list_wrap").remove();$(".file_dialog.clicked").removeClass("clicked");fc.outer_click_type=null};fc.pd_expanded_on_tablet=false;fc.outer_click_type=null;fc.handleOuterClick=function(b){switch(fc.outer_click_type){case"project_search":if(!$(b.target).parents("#fc_project_search").length){$("#fc_project_searchText").val("");$("#fc_search_results").slideUp("fast")}break;case"file_dialog":if(!$(b.target).parents(".file_dialog_list_wrap").length){fc.hideFileDialog()}break;case"share_popup":if(!$(b.target).is("#share_popup")&&!$(b.target).parents("#share_popup").length){fc.hideSharePopup()}break;case"project_actions":if(!$(b.target).is(".cog_container.active")&&!$(b.target).parents(".cog_container.active").length){$(".cog_container.active").removeClass("active");fc.outer_click_type=null}break;case"tasky_datepicker":if(!$(b.target).is(".new_date")&&!$(b.target).parents(".new_date").length){$(".new_date.hasDatepicker div").hide();fc.outer_click_type=null}break;case"dashboard_show_more":if(!$(b.target).is(".hidden_container.opened")&&!$(b.target).parents(".hidden_container.opened").length){$(".hidden_container.opened").removeClass("opened");fc.outer_click_type=null}break;case"dashboard_show_group_actoions":if(!$(b.target).is(".group_actions.opened")&&!$(b.target).parents(".group_actions.opened").length){$(".group_actions.opened").removeClass("opened");fc.outer_click_type=null}break;case"spaces_menu":if(!$(b.target).parents(".fc-spaces-nav").length){var a=angular.element($("[ng-controller=TagsTree]")).scope();a.spacesmenu=false;a.$apply()}break;case"user_popover":fc.user_popover_close(b);break;case"email_in_action_dropdown":$(".action_dropdown").hide();fc.outer_click_type=null;break;case"gantt_actions":if(!$(b.target).parents(".gantt_item_options_list").length&&!$(b.target).is(".gantt_actions_btn")){$(".gantt_item_options_list").hide();fc.outer_click_type=null}break;default:fc.outer_click_type=null}};fc.show_ajax=true;fc.ajax=function(a){if(a){if(this.show_ajax){$(".pace").addClass("pace-active")}}else{$(".pace").removeClass("pace-active")}};fc.last_migrate_warnings_count=0;fc.jqueryMigrationCheck=function(){if(fc.f_account_page){$.migrateWarnings=$.migrateWarnings.filter(function(a){return a.indexOf("jQuery.fn.attr('selected')")<0})}if($.migrateWarnings.length>fc.last_migrate_warnings_count){fc.last_migrate_warnings_count=$.migrateWarnings.length;fc.registerError({jquery_migration_errors:$.migrateWarnings},null,true,"info")}setTimeout(fc.jqueryMigrationCheck,2000)};fc.logEvent=function(c,d,a,e){a=a||"";e=e||false;var f=new Date()-fc.started_ts;var b=["_trackEvent",c,d,a,f];if(!e){fc.registerError({log_event:b},null,true,"info")}if(typeof _gaq!=="undefined"){_gaq.push(b)}};fc.addTimeSpentToForm=function(a){a.append($("<input type='hidden' name='time_on_page'>").val(new Date()-fc.started_ts))};function initUploadsBlock(a){initAttachmentsInText();fc.callWhenReady(function(){return typeof window.plupload!=="undefined"},function(){$(a).fcUpload()},"plupload")}function resetUploadsBlock(a){$(a).fcUpload("reset")}(function(f){var j=-144;var s={};f.fn.fcUpload=function(y,x){y=y||false;x=x||{};if("destroy"===y||"reset"===y){u(this.first().attr("id"));if("destroy"===y){return}}else{if("external_file"===y){if(x.start){n(x,this.first().attr("id"),true)}else{p(x,x,this.first().attr("id"),true)}return}else{if("get_folders"===y){return s[x.up_id].folders}else{if("update_folders"===y){h(x.up_id,x.folder_id)}}}}r();this.each(function(){d(f(this));m(f(this))});return this};function d(A){var F,E;E=A.attr("id");if(!E){E=plupload.guid();A.attr("id",E)}else{if(s[E]){return true}}var H=".fc_upload_block_template:first";if(A.parents("#import_xls_dialog").length){H="#import_xls_dialog .fc_upload_block_template:first"}A.append(f(H).clone().removeClass("fc_upload_block_template hide"));var I=A.data();var z=url_to_current_unique+"/"+I.urlsuffix;var y=A.find(".fc_upload_drop");var G=A.find(".fc_upload_ids").attr("name","attached_ids");var x=new Date().getTime();A.data("upload_batch_id",x);var D={application_id:I.appid,item_id:I.itemid,user_id:userid,comment_id:I.commentid,temporary:I.temp,first_version_id:I.firstversion||0,is_ajax:1,group_unique_name:I.groupname||"",upload_batch_id:x};var B={};if(I.max_size){B.max_file_size=I.max_size;B.ds_store=""}I.use_folders=I.use_folders||false;if(I.use_folders){if("chrome"!==fc.getBrowser()||!fc.isInputDirSupported()){I.use_folders=false;A.find(".folders, .fc_upload_folder").remove()}}var C={browse_button:A.find(".fc_upload_button").toArray(),drop_element:y[0],url:z+"/upload",multipart_params:D,directory:I.use_folders,multi_selection:I.no_multi?false:true,filters:B,flash_swf_url:cdn_url+"thirdparty/plupload/Moxie.swf",silverlight_xap_url:cdn_url+"thirdparty/plupload/Moxie.xap"};F=new plupload.Uploader(C);F.init();k(F,E);s[E]={uploader:F,fc_ids:[],url:z,ids_input:G,list:A.find(".fc_upload_list"),use_folders:I.use_folders,callback:I.callback,max_size:I.max_size||0,upgrade_url:I.upgrade_url,upload_batch_id:x,folders:[]};y.on("dragenter",function(){f(this).addClass("dragenter")});y.on("dragleave drop",function(){f(this).removeClass("dragenter")})}function m(x){if(typeof filepicker_api_key!=="undefined"){fc.callWhenReady(function(){return typeof FilePicker==="function"&&typeof gapi==="object"&&typeof gapi.client==="object"&&typeof google==="object"},function(){new FilePicker(x)},"picker")}}function a(y,x,z){if("add"===x){s[y]["fc_ids"][s[y]["fc_ids"].length]=z}else{s[y]["fc_ids"].splice(s[y]["fc_ids"].indexOf(z),1)}s[y]["ids_input"].val(s[y]["fc_ids"].join())}function k(y,x){y.bind("FilesAdded",function(z,A){plupload.each(A,function(B){n(B,x)});z.start()});y.bind("UploadProgress",function(z,A){b(A)});y.bind("Error",function(z,A){if(j===A.code){return}if(plupload.FILE_SIZE_ERROR===A.code){var B=Math.round(s[x].max_size/1024/1024*100)/100;A.message=max_filesize_str.replace("%d",B)+"<br>";if(s[x].upgrade_url.length){A.message+=upgrade_storage_1_str+" <a class='upload_err_link' href='"+s[x].upgrade_url+"'>"+upgrade_storage_2_str+"</a>"}}fc.displayError({title:upload_error_str,content:A.message,error_id:""},5000)});y.bind("UploadComplete",function(z,A){q(x)});y.bind("FileUploaded",function(z,A,B){p(A,B,x)})}function n(G,z,A){A=A||false;var y=G.id;var C="google"===G.ext_type;var D="onedrive"===G.ext_type;var J="dropbox"===G.ext_type;var H="box"===G.ext_type;var I=f(".fc_upload_item.template:first").clone().removeClass("template");I.attr("id","uploaded_file_"+y);I.data("f_google",C);I.data("f_onedrive",D);I.data("f_dropbox",J);I.data("f_box",H);I.data("f_external",A);I.data("up_id",z);I.find(".filename").text(G.name).attr("title",G.name);if(!C&&!D&&!J&&!H){var B=0;if(typeof G.size!=="undefined"){B=G.size}I.find(".filesize").text("("+fc.humanizeFileSize(B)+")")}I.data("pl_file_id",y);var F=c(z,G);I.data("folderid",F);if(false===F){s[z]["list"].append(I)}else{var x=s[z]["list"].find("#folder_"+z+"_"+F).show();x.find(".folder_files").append(I);w(z)}if(A){var E=20;I.data("f_server_progress",E);t(I);if(G.cke_placeholder){I.data("cke_placeholder",G.cke_placeholder)}}I.find(".file_upload_cancel").click(function(){o(I)});f("#"+z).parents("form").find("input:submit").prop("disabled",true)}function c(A,y){if(!s[A].use_folders){return false}var B="/";if(typeof y.getSource!=="undefined"){var z=y.getSource();if(z&&z.relativePath){B=fc.getDirPath(z.relativePath)}}var x=s[A].folders.indexOf(B);if(x>=0){return x}return v(A,B)}function w(y){var x=(s[y]["list"].find(".fc_upload_folder:visible").length<2);s[y]["list"].find(".root_folder").toggleClass("alone",x)}function v(z,A){var x=s[z].folders.length;s[z].folders[x]=A;var y=f(".fc_upload_folder.template:first").clone().removeClass("template");y.attr("id","folder_"+z+"_"+x).find(".folder_path").text(A);if(fc.isRootPath(A)){y.addClass("root_folder")}s[z]["list"].append(y);w(z);return x}function h(z,x){if(false===x){return}var y=f("#folder_"+z+"_"+x);if(!y.find(".fc_upload_item").length){y.hide()}w(z)}function e(z){var x=z.data("folderid");var y=z.data("up_id");z.remove();h(y,x)}function p(E,z,B,C){C=C||false;var A=E.id;if(C){D=z;A=E.temp_id}else{var y=f.parseJSON(z.response);var D=y.data}var F=f("#uploaded_file_"+A);if(399===z.status){e(F);fc.showRestoreSession();return false}var x=s[B].upload_batch_id;D.upload_batch_id=x;if(!C&&y.status==="error"){e(F);fc.displayError({title:upload_error_str,content:y.message,error_id:""},5000);return false}if(F.data("cke_placeholder")){F.data("cke_placeholder",false)}F.attr("id","uploaded_file_"+D.id);F.data("fc_file_id",D.id);F.data("f_server_progress",100);F.find(".fc_progress_bar").css("width","100%");setTimeout(function(){F.find(".fc_progress").hide();if(D.is_image){l(D.id,F,D.location)}if(s[B].callback){D.up_id=B;D.folder_id=F.data("folderid");window[s[B].callback](D);return}},200);a(B,"add",D.id)}function q(x){f("#"+x).parents("form").find("input:submit").prop("disabled",false)}function l(A,z,y){var x=z.parents("form").find(".attach_target, .fkit_editor").attr("id");if(x){addInsertImageBlock(A,x,y)}}function t(z){var y=95;var x=z.data("f_server_progress");if(!x||x>=y){return}var A=x+(y-x+1)/10;A=Math.round(A*100)/100;z.data("f_server_progress",A);z.find(".fc_progress_bar").css("width",A+"%");setTimeout(function(){t(z)},200)}function b(x){var A=85;var z=f("#uploaded_file_"+x.id);if(z.data("f_server_progress")){return}var y=(100-A)*x.percent/100;z.find(".fc_progress_bar").css("width",y+"%");if(x.percent===100){z.data("f_server_progress",y);t(z)}}function o(F){var y=F.data("pl_file_id");var A=F.data("fc_file_id");var B=F.data("up_id");var D=s[B]["uploader"];var C=F.data("f_external");var x=s[B].upload_batch_id;if(!C){var z=D.getFile(y);var G=z.status;D.removeFile(z);if(D.state===plupload.STARTED&&G===plupload.UPLOADING){D.stop();D.start()}}if(A){var E=F.parents("form").find(".attach_target, .fkit_editor").attr("id");if(E){removeAttachmentFromText(A,E)}ajaxRequest(s[B]["url"]+"/delete_file/"+A,{upload_batch_id:x},function(){a(B,"remove",A)})}else{if(F.data("cke_placeholder")){F.data("cke_placeholder").text("").data("cancelled",true)}}e(F)}function u(y){if(typeof y==="undefined"){return}var x=s[y].uploader;delete s[y];x.destroy();f("#"+y).html("")}var g=false;function r(){if(g){return}g=true;plupload.addFileFilter("ds_store",function(y,z,x){if(".DS_Store"===z.name){this.trigger("Error",{code:j,message:".DS_Store file is skipped.",file:z});x(false)}else{x(true)}})}}($));fc.humanizeFileSize=function(a){if(typeof a==="undefined"||!parseInt(a)){a=0}var d=1024;if(a<d){return a+" B"}var b=["KB","MB","GB"];var c=-1;do{a/=d;++c}while(a>=d);return a.toFixed(1)+" "+b[c]};fc.isInputDirSupported=function(){var a=document.createElement("input");return("webkitdirectory" in a)};fc.set_view_type=function(b,a){a=a||store.get(b)||"compact";$(".view_togglers .btn").removeClass("is-active");$(".view_togglers ."+a).addClass("is-active");$("#content").removeClass("minimal compact full").addClass(a);store.set(b,a)};fc.process_url_hash=function(){if(window.location.hash){var a=window.location.hash;if("#_=_"===a||"#/_=_"===a){history.pushState("",document.title,window.location.pathname+window.location.search);return}if(typeof fc.no_scroll_to_hash!=="undefined"){return}fc.scroll_to_hash(a)}};fc.scroll_to_hash=function(c,a){if(typeof a==="undefined"){a=10}var b=$(c);if(!b.length){return}if(!b.is(":visible")&&a){setTimeout(function(){fc.scroll_to_hash(c,--a)},100);return}var d=$(".comments_list");if(d.length){fc.scroll_when_images_loaded(b)}else{fc.scroll_to_element(b)}};fc.scroll_when_images_loaded=function(d){var c=$(".comment_content img");var a=c.length;if(!a){fc.scroll_to_element(d);return}var b=5000;var e=setTimeout(function(){clearTimeout(e);fc.scroll_to_element(d);e=null},b);c.each(function(){$(this).load(function(){a--;if(!e){return}if(!a){fc.scroll_to_element(d);clearTimeout(e);e=null}})})};fc.scroll_to_element=function(a,b){$("html, body").animate({scrollTop:a.offset().top-155},1000,function(){if(!b){fc.highlight_elements(a)}});history.pushState("",document.title,window.location.pathname+window.location.search)};fc.showSharePopup=function(){ajaxRequest(site_url("dashboard/share_popup"),{},function(a){$("body").append(a.data.html);$(".lighten").css("opacity","1").fadeIn("slow");$("#share_popup").fadeIn("slow")})};fc.hideSharePopup=function(){$(".lighten").attr("style","");$("#share_popup").fadeOut();fc.outer_click_type=null};fc.nl2br=function(a){return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")};fc.isTabletScreen=function(){var a=window.getComputedStyle(document.body,":after").getPropertyValue("content");if(a.indexOf("tablet")+1){return true}return false};fc.getCookie=function(a){var b="; "+document.cookie;var c=b.split("; "+a+"=");if(c.length===2){return c.pop().split(";").shift()}};fc.setCookie=function(b,f,c){var e=new Date();if(!$.isNumeric(c)){c=30}e.setTime(e.getTime()+(c*24*60*60*1000));var a="expires="+e.toUTCString();document.cookie=b+"="+f+"; "+a};fc.log_vz=function(a){if(fc.getCookie(vz_cookie_name)){return}ajaxRequest(base_url+"log_vz/"+a)};fc.blink=function(c,a,b){if(!c.length){return}if(a){c.data("blinking",false);return}if(b){if(c.data("blinking")){c.animate({opacity:0.2},500).animate({opacity:1},800,function(){fc.blink(c,false,true)})}else{c.attr("style",c.data("blink_before_style"))}return}if(c.data("blinking")){return}c.data("blinking",true).data("blink_before_style",c.attr("style")||"");setTimeout(function(){fc.blink(c,false,true)},400)};function clone_callback(a){$("form.clone_form").find("#subm_btn, #prev_btn").fadeOut("slow",function(){$("form.clone_form").find("#ok_btn").fadeIn()});var b=$("form.clone_form").find("#success_msg").html();b=b.replace("%PROJ_NAME%",a.data.project_name);b=b.replace("%NEW_PROJ_NAME%",a.data.new_project_name);$("form.clone_form").find("#success_msg").html(b);$("form.clone_form").find("#step_3").fadeOut("slow",function(){$(".modal > .form").find("#cl_wiz_ttl").fadeOut("fast");$("form.clone_form").find(".cancel").fadeOut("fast");$("form.clone_form").find("#step_4").fadeIn()});$("#temp_cover_ajax").remove();$(".loader_img").hide()}fc.isRootPath=function(a){return(a==="/"||a==="\\")};fc.getDirPath=function(d,a){a=a||false;var b=/[^\/]*$/;d=d.replace(b,"");if(!fc.isRootPath(d[d.length-1])){d=d+"/"}if(!a||fc.isRootPath(d)){return d}var e=d.split("/");var c="/"+e[e.length-2]+"/";return c};fc.improveCKEditor=function(b,c){c=c||false;try{var a=$(b).ckeditorGet()}catch(d){fc.registerError("improve_ckeditor() - catch",false,true,"error");return}fc.addCtrlEnterKeystroke(a);if(!c){fc.addPasteImagesHandling(a)}};fc.addCtrlEnterKeystroke=function(a){a.addCommand("submitOnCrtlEnter",{exec:function(b){$("#"+b.name).parents("form").submit()}});a.keystrokeHandler.keystrokes[CKEDITOR.CTRL+13]="submitOnCrtlEnter"};fc.addPasteImagesHandling=function(a){a.on("paste",function(b){return fc.handleCKEPaste(b)})};fc.getPastedImageProperties=function(a){var b=a.data();var c={application_id:b.appid,item_id:b.itemid,comment_id:b.commentid,temporary:b.temp,first_version_id:0,is_ajax:1,f_cke_paste:1,upload_batch_id:b.upload_batch_id};return c};fc.getFileFromInlineImg=function(b){if(!b.data.type||b.data.type!=="html"){return false}var f=b.data.dataValue;if(!f.match(/<img(.*?) src="data:image\/.{3,4};base64,.*?"(.*?)>/)){return false}match=f.match(/"(data:image\/(.{3,4});base64,.*?)"/);if(!match){return false}var j=match[1];var d=match[2].toLowerCase();var g=atob(j.split(",")[1]);var h=new Array(g.length);for(var e=0;e<g.length;e++){h[e]=g.charCodeAt(e)}var c=new Uint8Array(h);var a=new Blob([c],{type:"image/"+d});return a};fc.handleCKEPaste=function(e){if(e.data.dataValue.indexOf("fc_mention")!==-1){return true}if(e.data.dataValue.indexOf('<img src="webkit-fake-url:')!==-1){return false}var d=e.data.dataTransfer._.files;if(!d.length){var c=fc.getFileFromInlineImg(e);if(!c){return true}d[0]=c}var a=/image\/(jpeg|png|gif|bmp)/;for(var b=0;b<d.length;b++){if(null===d[b].type.match(a)){continue}fc.handlePastedImage(d[b],e)}return false};fc.getUploadBlockByEditorElement=function(d){var c=$(d);var b=c.parents("fieldset");if(!b.length){b=c.parents(".add_new_comment")}if(!b.length){return false}var a=b.find(".fc_upload_block");if(!a.length){return false}return a};fc.handlePastedImage=function(e,d){var g=d.editor;var a=g.element.$;var l=fc.getUploadBlockByEditorElement(a);if(!l){fc.registerError("handlePastedImage() - no up block",false,true,"error");return false}var q=fc.getPastedImageProperties(l);if(!q){fc.registerError("handlePastedImage() - no options",false,true,"error");return false}if(!fc.cke_pasted_number){fc.cke_pasted_number=0}fc.cke_pasted_number++;var j="",p="";if(fc.cke_pasted_number>1){j=" #"+fc.cke_pasted_number;p="_"+fc.cke_pasted_number}var c="pasted"+p+"."+e.type.replace("image/","");var f=new FormData();f.append("file",e,c);for(var n in q){f.append(n,q[n])}var b="[uploading pasted image"+j+"...]";var k="<p>"+b+"<p>";g.insertHtml(k);var h=$(g.editable().$).find("p:contains('"+b+"')");var o="p_"+Math.round((Math.random()*1000));var m={id:o,name:c,ext_type:"ckepaste",size:e.size,cke_placeholder:h,start:true};l.fcUpload("external_file",m);ajaxRequest(url_to_current_unique+"/files_rest/upload",f,function(r){if(h.data("cancelled")){h.remove();g.updateElement();return}r.data.temp_id=o;r.data.start=false;l.fcUpload("external_file",r.data);var s=getFCAttachHtml(r.data.id,"full");h.text(s);g.updateElement()},{f_form_data:true})};fc.saveTimezoneChanges=function(b,c){var a={};a.new_timezone=b.new_timezone;a.update_profile=c||"0";$("#agree, #notAgree").unbind("click");ajaxRequest(base_url+"manage/account/set_timezone",a,function(){$("#timezone_popup").removeClass("md-show");$(".lighten").attr("style","")})};fc.timezoneWork=function(){var a=store.get("usersTimezonesChangeCheckDates");if(!a||!a[userid]){fc.getUserActionDateAndSetLocalStorage()}else{fc.checkTimeToShow(a)}};fc.getUserActionDateAndSetLocalStorage=function(){var a=store.get("usersTimezonesChangeCheckDates");a=!a?{}:a;ajaxRequest(base_url+"manage/account/get_time_action",{},function(b){a[userid]=b.data;store.set("usersTimezonesChangeCheckDates",a);fc.checkTimeToShow(a,true)})};fc.checkTimeToShow=function(d,c){c=c||false;var b=new Date();var a=b.format("dd-mm-yyyy");if(c||d[userid]!=a){fc.checkTimezoneChange();d[userid]=a;store.set("usersTimezonesChangeCheckDates",d)}};fc.checkTimezoneChange=function(){var a={};var b=new Date().getTimezoneOffset();var c={};a.current_offset=-b;ajaxRequest(base_url+"manage/account/check_timezone",a,function(e){c={new_timezone:e.data.current_timezone};if(e.data.show_popup){var d=$(".md-content").height();$(".md-content").css("margin-top",-d/2);$("#timezone_popup").addClass(" md-show");$(".lighten").css("opacity","1").fadeIn();$("#userSystemTimezone").html($("#userSystemTimezone").text()+e.data.system_user_timezone_str);$("#curTimeZone").html($("#curTimeZone").text()+e.data.current_timezone_str+" ?");$("#agree").click(function(){fc.saveTimezoneChanges(c,1)});$("#notAgree").click(function(){fc.saveTimezoneChanges(c)})}})};jQuery.fn.highlight=function(b){function a(e,j){var l=0;if(e.nodeType==3){var k=e.data.toUpperCase().indexOf(j);k-=(e.data.substr(0,k).toUpperCase().length-e.data.substr(0,k).length);if(k>=0){var h=document.createElement("span");h.className="highlight";var f=e.splitText(k);var c=f.splitText(j.length);var d=f.cloneNode(true);h.appendChild(d);f.parentNode.replaceChild(h,f);l=1}}else{if(e.nodeType==1&&e.childNodes&&!/(script|style)/i.test(e.tagName)){for(var g=0;g<e.childNodes.length;++g){g+=a(e.childNodes[g],j)}}}return l}return this.length&&b&&b.length?this.each(function(){a(this,b.toUpperCase())}):this};jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;with(this.parentNode){replaceChild(this.firstChild,this);normalize()}}).end()};jQuery.expr[":"].Contains=function(c,d,b){return(c.textContent||c.innerText||"").toUpperCase().indexOf(b[3].toUpperCase())>=0};fc.filterByTextTimer=null;fc.filterByText=function(d,e,b,a,c){c=c||15;if($(b).length>c){$(d).removeClass("hide");$(d).on("keyup",e,function(f){var g=$(this).val();clearTimeout(fc.filterByTextTimer);fc.ajax(true);if(g){fc.filterByTextTimer=setTimeout(function(){$(b).find(a+":not(:Contains("+g+"))").parent().slideUp();$(b).find(a+":Contains("+g+")").parent().slideDown();fc.ajax(false)},480)}else{$(b).slideDown();fc.ajax(false)}})}else{$(d).hide()}};jQuery.fn.scrollTo=function(a,b,c){c=c||0;a=typeof a==="string"?$(a):a;$(this).animate({scrollTop:$(this).scrollTop()-$(this).offset().top+a.offset().top-c},b==undefined?1000:b);return this};$.fn.hasScrollBar=function(){var a=this.get(0);return{vertical:a.scrollHeight>a.clientHeight,horizontal:a.scrollWidth>a.clientWidth}};var collapsed_group_prefix="collapse_groups_";$(document).on("click",".collapsed_group_title",function(){var b=$(this);var a=b.siblings(".collapsed_group_table");var f=a.data("groupid");var d=collapsed_group_prefix+a.data("appid")+"_"+userid;var e=fc.getCollapsedApplicationGroupIds(d);var c=e.indexOf(f);if(c!=-1){e.splice(c,1);a.show()}else{e.push(f);a.hide()}store.set(d,e,true);b.toggleClass("collapsed")});fc.getCollapsedApplicationGroupIds=function(a){var b=store.get(a);return b?b:[]};fc.prepareApplicationsGroups=function(){var a=$(".collapsed_group_table");var b=collapsed_group_prefix+a.first().data("appid")+"_"+userid;var c=fc.getCollapsedApplicationGroupIds(b);if(empty(c)){return}a.each(function(){var d=$(this);var e=d.data("groupid");if(c.indexOf(e)!=-1){d.hide().parent().find(".collapsed_group_title").addClass("collapsed")}})};fc.disableElem=function(a){a.addClass("disabled").prop("disabled",true)};fc.enableElem=function(a){a.removeClass("disabled").removeAttr("disabled")};if(fc.f_common_footer){fc.app_data={discussions:{edit:"true",width:"700",singular:disc_title_str},files:{width:"560",singular:file_title_str},milestones:{singular:mile_title_str},time:{singular:time_title_str},todos:{edit:"true",width:"800",singular:task_title_str},bugtracker:{edit:"true",width:"700",singular:issue_title_str},calendar:{width:"750",singular:calendar_title_str},wiki:{edit:"true",type:"advanced",width:"700",singular:wiki_title_str}}}var time_ids=new Array();var refreshAfterClose=false;function show_msg_popup(a,b){popup_open=true;$(".lighten").css("opacity","1").fadeIn();$("#"+a).find(".main_text").html(b);$("#"+a).fadeIn();$("[autofocus]").focus()}function hide_msg_popup(a){jQuery(document).trigger("close_modal_popup_event");popup_open=false;$(".lighten").attr("style","");$("#"+a).fadeOut("slow")}function set_date_for_calendar(){if(!$.isEmptyObject(fc.selected_calendar_date)){var a=fc.selected_calendar_date.year+"-"+fc.selected_calendar_date.month+"-"+fc.selected_calendar_date.day;$(document).on("datepickerLoaded",".todo_add_popup #todo_due_date, .milestone_add_form #due_date, .add_edit_event_form.form_type_add #date_start, .add_edit_event_form.form_type_add #date_end, .bt_form.form_type_add #issue_due_date",function(){$(this)[0].picker.setDate(a)});fc.selected_calendar_date={}}}function is_editor_ready_for_insert(b){var a=CKEDITOR.instances[b];return a?true:false}function on_quick_add(a){if(a.data.callback&&typeof window[a.data.callback]==="function"){window[a.data.callback](a);return}$.flash_action(a.data.message,4000);if(fc.f_reload_after_quick_add){location.reload()}}$(function(){$(".tip").tipr();$(document).on("click",".file_action:not(.delete,.disabled)",function(){fc.hideFileDialog()});$(document).on("click",".file_dialog",function(h){h.preventDefault();fc.hideFileDialog();$(this).addClass("clicked");var s=$(this);var t=s.data("download-name")||download_file_str;var j="";var l=$(this).closest(".attachments-pane").data("editorid");var k=l&&is_editor_ready_for_insert(l);var d=s.data("insert-attachments")&&k;var f=s.data("fversion-id");var p=s.data("groupfile");j+='<div class="file_dialog_list_wrap'+(d?" with_insert":"")+'" data-fversion-id="'+f+'" data-groupfile="'+p+'"><img src="'+base_url+'images/files/dialog_arrow.png" class="dialog_arrow" /><ul class="file_dialog_list">';if(s.data("files-online-edit")){j+='<li class="f_online_edit"><a data-fileid="'+s.data("fileid")+'" data-first_version_id="'+f+'"  href="#" data-timestamp="'+s.data("timestamp")+'" class="file_action action offline_edit"><span>&nbsp;</span>'+file_online_edit_str+"</a></li>"}j+='<li class="f_download_file"><a class="file_action" href="'+s.data("download-href")+'" target="_blank"><span>&nbsp;</span>'+t+"</a></li>";if(s.data("files-access")){var o=url_to_project_unique_name+"/files/versions/"+f;j+='<li class="f_view_versions"><a class="file_action" href="'+o+'"><span>&nbsp;</span>'+file_versions_str+"</a></li>"}if(s.data("files-access")||p){if(k){j+='<li class="f_delete"><a class="file_action disabled" style="color: lightgray" title="'+fileDeleteDisabledHintStr+'" ><span class="no_hover">&nbsp;</span>'+file_delete_str+"</a></li>"}else{j+='<li class="f_delete"><a class="file_action delete" href="#" data-callback="deleteAttachedFile"><span>&nbsp;</span>'+file_delete_str+"</a></li>"}}if(d){var n=$(this).data("location")||"";var m=(n!="storage")?'style="width: 100%;"':"";var r="<a "+m+' class="insert_image_link" data-size="thumb">'+embed_thumb_str+"</a>";var c=(n=="storage")?'<a class="insert_image_link" data-size="medium">'+embed_medium_str+"</a>":"";var q=(n=="storage")?'<a class="insert_image_link" data-size="full">'+embed_full_str+"</a>":"";var g=s.data("fileid");j+='<li class="f_insert_comment"><div class="file_action insert_image_block" data-fileid="'+g+'" data-editorid="'+l+'"><div class="insert_title file_action">'+embed_label_str+"</div>"+r+c+q+'<div class="clear"></div></div></li>'}j+="</ul></div>";$("body").append(j);$(".file_dialog_list_wrap").css({left:h.pageX+20,top:h.pageY-70});fc.outer_click_type="file_dialog";initAttachmentsInText()});start_timers();if(typeof $().timeago==="function"){$(".timeago").timeago()}$(document).on("click",".control",function(g){g.preventDefault();var f=$(this);var d=$(this).parents(".time_widget_item");var c=f.attr("href");if(!$.trim(c).length){return}ajaxRequest(c,{total_time:$("#total_time").val()},function(j){var e=d.find(".time_widget_control");var h=$(".timer_widget").find(".control_link").val();var l=d.attr("data-id");if(f.hasClass("start")){w_start(l);e.html('<a class="stop control" href="'+h+"stop/"+l+'"></a>')}else{w_stop(l);e.html('<a class="start control" href="'+h+"start/"+l+'"></a>');var k=j.data;$(".total_time .hours").text(k.total_time_hours);$(".total_time .mins").text(k.total_time_mins);$("#time_"+l+" .hours").text(k.time_hours);$("#time_"+l+" .mins").text(k.time_mins);$("#total_time").val(k.total_time)}if(time_ids.length>0){$(".global_action_link.timer_activate").addClass("active")}else{$(".global_action_link.timer_activate").removeClass("active")}f_time_buttons_disabled=false})});$(".quick_add_widget").on("click","a.fc-selector",function(){if(typeof $(this).data("project-url")==="undefined"){return}var c=$(this).parent(".fc-proj-select");if(c.hasClass("active")){c.find(".fc-group-project-list").fadeOut(300,function(){c.removeClass("active");$("#proj_app_list").fadeIn()})}else{c.addClass("active");$("#proj_app_list").fadeOut(300,function(){c.find(".fc-group-project-list").fadeIn()})}});$(".quick_add_widget").on("click",".fc_project_link",function(){var c=$(".quick_add_widget").find(".fc-selector");var g=$(this).data("uname");c.data("project-url",$(this).data("href"));c.find(".project-name").text($(this).find(".name").text());$("#proj_app_list").html("");var e=project_apps_ar[g];for(var f=0;f<e.length;f++){var h=e[f].unique_name;if(!fc.app_data[h]){continue}var d=fc.app_data[h].singular;$("#proj_app_list").append('<div class="row" data-unique-name="'+h+'"><table><tr><td class="icon"><span class="app_name app_'+h+'"></span></td><td class="title">'+d+"</td></tr></table></div>")}c.click()});$(document).on("click","#proj_app_list .row",function(){quick_add_open_popup($(this))});$(document).on("click",".user a.meta",function(c){c.stopPropagation();fc.toggleUserMenu()});var b=$(".flash_message");if(!(b.html()=="")){a(b.html())}function a(d){var c=$(".flash_message");c.html(d);c.slideDown().delay(2000).slideUp()}$.extend({flash_action:function(f,d,e){d=d||2000;e=e||"";var c=$(".flash_message");c.html(f);c.clearQueue().addClass(e).slideDown().delay(d).slideUp();if(e){setTimeout(function(){c.removeClass(e)},d+1000)}}});$(document).on("submit",".modal .form form",function(j){var f=$(this);if((f.attr("data-ignore-form")=="true"&&f.hasClass("fkit_form"))||f[0].fkit_errors){return false}var c=f.data("validation");if(c&&typeof window[c]==="function"){if(!window[c]()){return false}}f.css({position:"relative"});var d=$('<div id="temp_cover_ajax"><img src="'+cdn_url+'images/ajax-loader.gif" style="position:absolute; top:50%; left:50%;" /></div>');f.parents(".form").append(d);if(f.attr("data-ignore-form")!="true"){j.preventDefault();var h=$(this).attr("action");var k=function(){};var l=$(".modal .form").data("callback");if(l&&typeof window[l]==="function"){k=window[l]}if(!fc.disableForm(f)){return false}var g={};if(typeof f[0].processErrors==="function"){g.onError=f[0].processErrors}g["$form"]=f;ajaxRequest(h,f.serializeFormJSON(),k,g);return false}});$(document).on("submit",".flash_message form",function(g){var d=$(this);d.css({position:"relative"});var c=$('<div id="temp_cover_ajax"><img src="'+cdn_url+'images/ajax-loader.gif" style="position:absolute; top:50%; left:50%;" /></div>');d.append(c);g.preventDefault();d.find("input[type=submit]").prop("disabled",true);var f=$(this).attr("action");var h=function(){$(".flash_message").slideUp();if($(".modal .form form").length){$(".modal .form form").submit()}else{a(session_restored_str)}};ajaxRequest(f,d.serializeFormJSON(),h);return false});$(document).on("click",".group_selection .add_new_group",function(c){c.preventDefault();if(fc.updateParentsDropdown){fc.updateParentsDropdown(true)}$("#add_another_btn").hide();toggleGroupNameInput($(this))});$(document).on("click",".close_box, .close_it_link",function(c){hide_msg_popup($(this).parents(".user_msg_box").attr("id"))});if(typeof init_search!=="undefined"){init_search_input()}if(typeof intercomSettings!=="undefined"){init_intercom()}$("ul.fc-projects li, ul.fc_group li").hover(function(){var e=$(this).find(".fc-applications");var c=$(this).offset();if(typeof c!=="object"||c===null){return}else{var f=e.outerHeight();var d=$(window).height();var g=c.top-$(window).scrollTop();if(g+f>d){var h=d-(g+f)-5;e.css("top",parseInt(h)+"px")}else{e.css("top","-1px")}}},function(){});$(document).mouseup(function(c){if(fc.outer_click_type){fc.handleOuterClick(c)}});$(document).keydown(function(c){if(c.keyCode==27){fc.hideSearch()}});$(".download_btn_small.inactive").click(function(){fc.logEvent("folder_download","inactive")});handleAppDDForSmallScreen();setTimeout(fc.jqueryMigrationCheck,500);$(document).on("click",".add_entry_btn",function(c){c.preventDefault();$(".no_entries_inner").addClass("animateOut");setTimeout(function(){$(".entry_3").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(".no_entries_inner").removeClass("animateOut")});$(".add_entry_btn_real").click()},400)})});function pad(b,a){var c=""+b;while(c.length<a){c="0"+c}return c}$(document).ajaxStart(function(){fc.ajax(true)});$(document).ajaxComplete(function(a,b){fc.ajax(false);if(b.status==399){fc.showRestoreSession()}});function start_timers(){for(var a=0;a<time_running_ids.length;a++){w_start(time_running_ids[a])}}function w_start(a){window["w_timer_"+a]=setInterval(function(){var k=$("#time_widget_display_"+a);var l=k.children(".t_w_h"),g=k.children(".t_w_m"),d=k.children(".t_w_s");var h=parseInt(l.html(),10);var c=parseInt(g.html(),10);var j=parseInt(d.html(),10);if(j==59){j=0;c++}else{j++}if(c==59){c=0;h++}var f=pad(j,2);var b=pad(c,2);var e=pad(h,2);d.html(f);g.html(b);l.html(e)},1000);if(!$("#time_widget_control_"+a).parents(".time_widget_item").hasClass("hide")){time_ids.push(a)}if(typeof start_minutes==="function"){start_minutes(a)}}function w_stop(e){var d=$("#time_widget_display_"+e);var a=d.children(".t_w_h");var c=d.children(".t_w_m");var f=d.children(".t_w_s");f.html("00");c.html("00");a.html("00");var b="w_timer_"+e;if(typeof window[b]!=="undefined"){clearInterval(window[b])}if(!$("#time_widget_control_"+e).parents(".time_widget_item").hasClass("hide")){time_ids.splice($.inArray(e,time_ids),1)}if(typeof stop_minutes==="function"){stop_minutes(e)}}function init_intercom(){var a=function(){a.c(arguments)};a.q=[];a.c=function(c){a.q.push(c)};window.Intercom=a;function b(){var d=document.createElement("script");d.type="text/javascript";d.async=true;d.src="https://api.intercom.io/api/js/library.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,c)}if(window.attachEvent){window.attachEvent("onload",b)}else{window.addEventListener("load",b,false)}}function init_search_input(){var a="";a+='<ul class="fc_search_result_group"><li class="fc_search_result_title"></li></ul>';var d="";d+='<li class="fc_search_result_entry flex"><span class="type"></span><a class="flex-auto" href="#"><span class="title"></span> </a><span class="fc_search_result_date"></span></li>';var c;var b=1000;$("#fc_project_searchText").bind("textchange",function(){$th=$(this);clearTimeout(c);c=setTimeout(function(){if($th.val().length>3){$("#fc_project_search").submit()}},b);$("#fc_search_progress").stop().width("100%").animate({width:0},b)});$("#fc_project_search").submit(function(j){j.preventDefault();var h=$(this);var f=$.trim($("#fc_project_searchText").val());if(f.length<3){return}if(h.hasClass("searching")){return}if(h.data("phrase")===f){return}h.addClass("searching").data("phrase",f);var g=h.siblings(".clear_search");g.fadeIn();fc.triggerAnimation(g,"searching");ajaxRequest(h.attr("action"),h.serializeFormJSON(),function(e){g.removeClass("searching");$("#fc_search_results").html("");if(e.data.applications.length==0){$("#fc_search_results").append('<ul class="fc_search_result_group"><li class="fc_search_result_entry">'+nothing_found_str+"</li></ul>").slideDown("slow")}else{for(var k in e.data.applications){var q=e.data.applications[k];var p=$(a);p.find(".fc_search_result_title").html(k+" ("+q.length+")");for(var n in q){var o=$(d);o.find(".title").html(q[n].title);if(k==="results"){o.find(".type").html("("+q[n].singular+") ")}var r=/([\d]{4})-([\d]{2})-([\d]{2})\s([\d]{2}):([\d]{2}):([\d]{2})/g;var m=r.exec(q[n].date);if(m!=undefined){m[2]=parseInt(m[2])-1;var l=new Date(m[1],m[2],m[3],m[4],m[5],m[6]);o.find(".fc_search_result_date").html(l.format("shortDate"))}o.find("a").attr("href",q[n].link);p.append(o)}$("#fc_search_results").append(p).slideDown("slow")}}});return});$(document).on("click touchend","aside .fc_search_activate",function(f){f.preventDefault();if($(".srch_res_cntr").is(":visible")){fc.hideSearch()}else{fc.showSearch($(this))}});$(".srch_res_cntr .clear_search").click(function(f){f.preventDefault();fc.hideSearch()})}function handleAppDDForSmallScreen(){$("#applications li a").click(function(a){if($(window).width()>=768){return true}var b=$("#applications");if($(this).parents("li").hasClass("active")){b.toggleClass("small_screen_shown");a.preventDefault()}})}function toggleGroupNameInput(b,a){a=a||false;$(".group_selection .group_name_select").toggle(a);$(".toggle_f_subtask").toggleClass("hide",a);$(".group_selection .group_name_new").toggle(!a).toggleClass("hide",a);$(".descr_block").toggle(!a);b.toggle(a);if(a){$(".group_selection .group_name_new input").val("")}$(document).trigger("fc_group_name_input_toggled")}function deleteAttachedFile(d){var c=d.parents(".file_dialog_list_wrap");var b=c.data("fversion-id");var a=c.data("groupfile");ajaxRequest(url_to_current_unique+"/files/delete/",{ids:[b],is_group_file:a})}function quick_add_open_popup(d,f){f=f||false;var e=d.data("unique-name");if(!e){fc.registerError("Probably wrong project selected in the quick add widget","",true,"error");return false}var b=$(".quick_add_widget").find(".fc-selector").data("project-url")+"/"+e+"/add";if(!popup_open){var a=fc.app_data[e];a.href=b;if("calendar"==e&&typeof view_type!=="undefined"){a.href+="/"+view_type}a.callback="on_quick_add";a.ajaxdata={quick_add:true};if(!f){$("ul.app li.quick_add > a").click()}$(".fkit_dropdown.is_active")[0].close_all_fkit_dropdowns();var c=fkit.initiateModal({},$("<div/>"),a);c.fkit_modal_open(c);fc.logEvent("quick_add_click",e)}}!function(d,c){"function"==typeof define&&define.amd?define(c):"object"==typeof exports?module.exports=c():d.ResizeSensor=c()}(this,function(){function d(h,g){var m=Object.prototype.toString.call(h),l="[object Array]"===m||"[object NodeList]"===m||"[object HTMLCollection]"===m||"[object Object]"===m||"undefined"!=typeof jQuery&&h instanceof jQuery||"undefined"!=typeof Elements&&h instanceof Elements,k=0,j=h.length;if(l){for(;k<j;k++){g(h[k])}}else{g(h)}}if("undefined"==typeof window){return null}var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(b){return window.setTimeout(b,20)},f=function(k,j){function c(){var h=[];this.add=function(m){h.push(m)};var g,l;this.call=function(){for(g=0,l=h.length;g<l;g++){h[g].call()}},this.remove=function(n){var m=[];for(g=0,l=h.length;g<l;g++){h[g]!==n&&m.push(h[g])}h=m},this.length=function(){return h.length}}function b(h,g){return h.currentStyle?h.currentStyle[g]:window.getComputedStyle?window.getComputedStyle(h,null).getPropertyValue(g):h.style[g]}function a(H,G){if(H){if(H.resizedAttached){return void H.resizedAttached.add(G)}H.resizedAttached=new c,H.resizedAttached.add(G),H.resizeSensor=document.createElement("div"),H.resizeSensor.className="resize-sensor";var F="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",E="position: absolute; left: 0; top: 0; transition: 0s;";H.resizeSensor.style.cssText=F,H.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+F+'"><div style="'+E+'"></div></div><div class="resize-sensor-shrink" style="'+F+'"><div style="'+E+' width: 200%; height: 200%"></div></div>',H.appendChild(H.resizeSensor),"static"==b(H,"position")&&(H.style.position="relative");var A,z,y,x,D=H.resizeSensor.childNodes[0],C=D.childNodes[0],B=H.resizeSensor.childNodes[1],w=H.offsetWidth,v=H.offsetHeight,u=function(){C.style.width="100000px",C.style.height="100000px",D.scrollLeft=100000,D.scrollTop=100000,B.scrollLeft=100000,B.scrollTop=100000};u();var g=function(){z=0,A&&(w=y,v=x,H.resizedAttached&&H.resizedAttached.call())},J=function(){y=H.offsetWidth,x=H.offsetHeight,A=y!=w||x!=v,A&&!z&&(z=e(g)),u()},I=function(l,h,m){l.attachEvent?l.attachEvent("on"+h,m):l.addEventListener(h,m)};I(D,"scroll",J),I(B,"scroll",J)}}d(k,function(g){a(g,j)}),this.detach=function(g){f.detach(k,g)}};return f.detach=function(b,g){d(b,function(c){c&&(c.resizedAttached&&"function"==typeof g&&(c.resizedAttached.remove(g),c.resizedAttached.length())||c.resizeSensor&&(c.contains(c.resizeSensor)&&c.removeChild(c.resizeSensor),delete c.resizeSensor,delete c.resizedAttached))})},f});if(typeof fkit==="undefined"){var fkit={}}else{alert("You've overridden the fkit shortcut fkit, please fix your code asap!")}fkit.modal_opened=false;fkit.modal_lock=false;fkit.modal_temp_lock=true;fkit.modal_temp_lock_timeout=null;fkit.modal_height=0;fkit.preloading_boxes=$('<div class="preloading_boxes"><div class="bx box__1"></div><div class="bx box__2"></div><div class="bx box__3"></div><div class="bx box__4"></div><div class="bx box__5"></div><div class="bx box__6"></div><div class="bx box__7"></div><div class="bx box__8"></div><div class="bx box__9"></div><div class="bx box__10"></div><div class="bx box__11"></div><div class="bx box__12"></div><div class="bx box__13"></div></div>');if(typeof $.ui!=="undefined"){$.ui.position.custom={left:function(a,c){var b=a.left;$.ui.position.flip.left(a,c);if(b!=a.left){c.elem.addClass("flippedLeft")}else{c.elem.removeClass("flippedLeft")}},top:function(a,c){var b=a.top;$.ui.position.flip.top(a,c);if(b!=a.top){c.elem.addClass("flippedTop")}else{c.elem.removeClass("flippedTop")}}}}fkit.fkit_delete_dialog=$('<div class="dropdown-delete"><div class="header">Are you sure you?</div><div class="body"><div class="message">You are about to delete an item</div><div class="confirm"><a class="yes btn btn-positive btn-s">Yes</a> <a class="no btn btn-s">No</a></div></div>');fkit.$error_message=$('<div class="field_message"/>');fkit.initiatePlugins=function(a){var a=(a?a+" ":"");if($("field .error_message").length){$("field .error_message").parents(".group").addClass("error")}$(a+" .fkit_tip:not(.tooltipstered)").each(function(){var b=this;b.$th=$(this);if(!fc.isMobileVersion){b.$th.tooltipster({functionInit:function(c,f){var e=$(f.origin),g=e.data("tip-options");var d={theme:"tooltipster-borderless",side:"bottom",restoration:"previous"};if(typeof g!=="undefined"){$.extend(d,g)}$.each(d,function(h,j){c.option(h,j)});b.instance=c}})}});$(a+" .fkit_date:not(.dateinitiated):not([disabled]):not(.fkit_ignore)").each(function(){var d=this;d.$th=$(this);d.options={};d.dataOptions=d.$th.data("dateOptions");d.icon=d.$th.data("date-icon");d.time=d.$th.data("date-time");d["static"]=!!d.$th.data("date-static");if(d.icon){d.$th.parents("field").on("click",".field_icon",function(){setTimeout(function(){d.picker.open()},80)})}Flatpickr.l10ns["default"].firstDayOfWeek=week_first_day;d.defaultOptions={altInput:true,altFormat:"M j, Y",dateFormat:"Y-m-d",allowInput:true,altInputClass:"dateinitiated","static":d["static"]};d.time_options={enableTime:true,altFormat:d.defaultOptions.altFormat+" h:i K",dateFormat:d.defaultOptions.dateFormat+" H:i:S"};d.time=d.time?d.time_options:{};d.options.onChange=function(f,h){d.$th.trigger("fkitDateChange",[f,h]);if(typeof d.$th.data("date-select-past")!=="undefined"){var g=new Date(Date.parse(f));var e=new Date();e.setHours(0,0,0,0);if(g<e){if(typeof past_date_str!=="undefined"){alert(past_date_str)}}}};d.options.onValueUpdate=function(e,f){d.$th.trigger("fkitDateValueChange",[e,f])};d.options.onOpen=function(e,f){d.$th.trigger("fkitDateOpen",[e,f])};d.options.onClose=function(e,f){if(typeof d.$th.data("date-empty")!=="undefined"){if(!d.$th.parents(".group").find(".fkit_date[type='text']").val().length){d.$th.parents(".group").find(".fkit_date[type='hidden']").val("")}}d.$th.trigger("fkitDateClose",[e,f])};if(typeof d.$th.data("date-disable-past")!=="undefined"){d.options.minDate=new Date()}if(typeof d.$th.data("date-default-tomorrow")!=="undefined"){var b=new Date();b.setDate(b.getDate()+1);d.options.defaultDate=b}if(typeof d.$th.data("date-default-today")!=="undefined"){var c=new Date();c.setHours(0,0,0,0);d.options.defaultDate=c}d.toggleTime=function(g){d.picker.destroy();var f=g?d.time_options:{};var e={};$.extend(e,d.options,d.defaultOptions,d.dataOptions,f);d.picker=d.$th.flatpickr(e)};d.final_options={};$.extend(d.final_options,d.options,d.defaultOptions,d.dataOptions,d.time);d.picker=d.$th.flatpickr(d.final_options);d.$th.addClass("dateinitiated");d.$th.trigger("datepickerLoaded")});$(a+" .fkit_color:not(.colorinitiated)").each(function(){var b=$(this);if(b.data("color-preview")){b.parents("field").find(".color_selected").css("backgroundColor","#"+(b.val()!==""?b.val():"ffffff"));b.parents("field").on("click",".color_preview",function(){b.ColorPickerShow()})}b.ColorPicker({onSubmit:function(c,f,d,e){$(e).val(f);$(e).ColorPickerHide()},onBeforeShow:function(){b.ColorPickerSetColor(this.value)},onChange:function(c,e,d){if(b.data("color-preview")){b.parents("field").find(".color_selected").css("backgroundColor","#"+e)}b.val(e)}}).on("keyup change",function(){b.ColorPickerSetColor(this.value);if(b.data("color-preview")){b.parents("field").find(".color_selected").css("backgroundColor","#"+this.value)}}).addClass("colorinitiated")});$(a+" .fkit_time:not(.timeinitiated)").each(function(){var c=$(this);var b=c.data("time-icon");if(b){c.parents("field").on("click",".field_icon",function(){c.focus()})}c.timeEntry().addClass("timeinitiated")});$(a+" .fkit_editor:not(.editorinitiated):not(.fkit_ignore)").each(function(){var b=this;b.$th=$(this);if(!b.$th.attr("id")){b.$th.attr("id",fkit.guidGenerator())}b.editorType=b.$th.data("editorType");b.additionalOptions=b.$th.data("editorOptions");b.options={};if(b.editorType==="standard"){b.options=ckeditor_standard_options}else{if(b.editorType==="advanced"){b.options=ckeditor_advanced_options}else{b.options=ckeditor_standard_options}}if(b.additionalOptions){$.extend(b.options,b.additionalOptions)}if(fc.isMobileVersion){b.options.width="100%"}b.$th.ckeditor(function(){b.$th.trigger("editorloaded");b.instance=CKEDITOR.instances[b.$th.attr("id")];b.instance.on("change",function(){b.$th.trigger("editorchanged")});fc.improveCKEditor(b.$th)},b.options);b.$th.addClass("editorinitiated")});$(a+" .fkit_multi_select:not(.multiselectinitiated)").each(function(){var e=$(this);if(e.parents(".fkit_ignore").length){return true}var f=e.data("multi-none-text");var h=e.data("multi-filter-text");var g=(f?f:"Choose Users");var b=(h?h:"Enter Name");var d=(e.data("multi-options")?e.data("multi-options"):{});var c={noneSelectedText:g,position:{at:"left bottom",my:"left top"},menuWidth:null};$.extend(c,d);c.minWidth=e.width()-12;e.multiselect(c).multiselectfilter({placeholder:b});e.addClass("multiselectinitiated")});$(a+" .fkit_create_new:not(.createnewinitated)").each(function(){var b=this;b.$th=$(this);b.$th.on("click",function(j){j.preventDefault();var d=$(this)[0];var f=d.$th.data("createFields");var h=d.$th.parents(".group");var c="";for(var g=0;g<f.length;g++){var k=(f[g].placeholder?f[g].placeholder:"");c+='<div class="group"><label for="'+f[g].name+'">'+f[g].label+'</label><field><input type="text" id="'+f[g].name+'" name="'+f[g].name+'" placeholder="'+k+'"></field></div>'}h.after($(c)).remove()});if(!b.$th.parents(".group").find("select").html().trim().length){b.$th.click()}b.$th.addClass("createnewinitated")});$(a+" .fkit_dropdown:not(.dropdowninitiated)").each(function(c){var b=this;b=fkit.initiateDropdown(b,$(this),false);return b});$(a+" .fkit_modal:not(.modalinitiated), "+a+" .load_popup:not(.modalinitiated)").each(function(c){var b=this;b=fkit.initiateModal(b,$(this),false);return b});$(a+" .fkit_form:not(.forminitiated):not(.fkit_ignore)").each(function(c){var b=this;b=fkit.initiateForm(b,$(this),false);return b});$(a+" .fkit_scroll:not(.scrollinitiated)").each(function(){var b=this;b.$th=$(this);if(!(b.$th.data("firefoxOnly")&&navigator.userAgent.indexOf("Firefox")>0)){b.$th.addClass("scrollinitiated");return false}b.options={};b.dataOptions=b.$th.data("options");b.defaultOptions={wheelSpeed:5,wheelPropagation:true,minScrollbarLength:20,handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"]};$.extend(b.options,b.defaultOptions,b.dataOptions);b.scroller=b.$th.perfectScrollbar(b.options);b.$th.addClass("scrollinitiated")});$(a+" .fkit_loading:not(.loadinginitiated)").each(function(c){var b=this;b.$th=$(this);b.default_settings={type:"list_items"};b.new_settings=b.$th.data();b.settings=$.extend({},b.default_settings,b.new_settings);b.$content=$('<div class="skeleton-screen"><div class="skeleton-item item-1"></div><div class="skeleton-item item-2"></div><div class="skeleton-item item-3"></div></div>');b.animate_in=function(d,e){d.addClass("animate-in");setTimeout(function(){d.removeClass("animate-in").addClass("animated");if(e){setTimeout(function(){e(b.$th.find(".item-2"))},300)}},350)};if(b.settings.type==="list_items"){b.$th.append(b.$content);b.animate_in(b.$th.find(".item-1"),b.animate_in);setTimeout(function(){b.animate_in(b.$th.find(".item-3"))},800)}b.$th.addClass("loadinginitiated");return b});$(a+" .fkit_delete:not(.deleteinitiated)").each(function(c){var b=this;b.$th=$(this);b.default_settings={message:"You are about to delete an item.","delete-callback":function(){},"number-items":1};b.new_settings=b.$th.data();b.settings=$.extend({},b.default_settings,b.new_settings);b.$th.addClass("deleteinitiated");return b})};fkit.resetInitiadedFlags=function(a){$(a).find('[class*="initiated"]').addBack().each(function(){var b=this.className.match(/\w*initiated(\b|$)/);if(b){$(this).removeClass(b[0])}})};fkit.destroyPlugins=function(b,a){b=b||"";a=a||"";$(b+" .fkit_tip.tooltipstered"+a).each(function(){$(this).tooltipster("destroy")})};$(document).on("click",function(b){if(fkit.modal_opened){fkit.modal_close_by_cursor_position(b)}if($(".fkit_dropdown.is_active").length){var a=$(".fkit_dropdown.is_active")[0];if(($(".fkit_dropdown.is_active").data("deleteMessage")&&(!$(b.target).is(a.$dropdown_button)&&!$(b.target).parents("."+a.$content.attr("class").split(" ").join(".")).length))||(!$(b.target).parents(".fkit_dropdown").length&&!$(".fkit_dropdown.is_active").data("deleteCallback")&&!$(b.target).hasClass("password_field"))){$(".fkit_dropdown.is_active")[0].fkit_dropdown_close()}}if($(".dropdown-delete").length&&$(".dropdown-delete").hasClass("is_active")){if(!$(b.target).parents(".dropdown-delete").length&&!$(b.target).is($(".dropdown-delete"))){$(".dropdown-delete")[0].self.$content.close_confirmation()}}});$(document).keydown(function(a){if(a.keyCode===27&&fkit.modal_opened){fkit.modal_opened.fkit_modal_close()}});fkit.body_overflow=function(){if(!fc.isMobileVersion){var a=$("html").hasScrollBar().horizontal;if(a&&!$("body").hasClass("fc_side_minimized_hide")&&$(".action_bar_right").length){$("body").addClass("fc_side_minimized");setTimeout(function(){$("body").addClass("fc_side_minimized_hide");$("body").removeClass("fc_side_minimized");if(fkit.action_bar_visible){fkit.action_bar_min_width=$(".action_bar_right").offset().left+$(".action_bar_right").outerWidth();fkit.action_bar_resize()}},200);$(".body_width").css({"min-width":"500px"})}else{if($("body").width()>1200){$("body").addClass("fc_side_expanded");$("body").removeClass("fc_side_minimized_hide");setTimeout(function(){$("body").removeClass("fc_side_expanded")},200);$(".body_width").css({"min-width":"940px"})}}}};fkit.action_bar_resize=function(){if(!fc.isMobileVersion){if(((fkit.action_bar_right.offset().left+fkit.action_bar_right.width())>window.innerWidth||fkit.action_bar_min_width>window.innerWidth)&&window.innerWidth>769){if(!$(".action_bar").hasClass("action_two_lines")){fkit.action_bar_min_width=$(".action_bar_right").offset().left+$(".action_bar_right").outerWidth()}if($("html").hasScrollBar().horizontal){$(".action_bar").addClass("action_two_lines")}}else{$(".action_bar").removeClass("action_two_lines")}}};$(function(){$(document).on("keydown",".dateinitiated[type='text']",function(a){if(a.keyCode===8||a.keyCode===46){$(this).val("");$(this).trigger("datepicker_cleared")}});if(!fc.isMobileVersion){fkit.collapsable_sidebar=$(".fc_sidebar_collapse").length;fkit.original_body_collapsed=$("body").hasClass("fc_side_minimized_hide");if($(".action_bar_right").length){fkit.action_bar_visible=$(".action_bar .action_bar_left").length;if(fkit.action_bar_visible){fkit.action_bar_right=$(".action_bar_right")}if(fkit.action_bar_visible){fkit.action_bar_min_width=$(".action_bar_right").offset().left+$(".action_bar_right").outerWidth();fkit.action_bar_resize()}}if(fkit.collapsable_sidebar&&!fkit.original_body_collapsed){fkit.body_overflow()}$(window).on("resize",function(){if(fkit.action_bar_visible){fkit.action_bar_resize()}if(fkit.modal_opened&&$(".modal .form form").length){fkit.render_modal_bottom()}if(fkit.collapsable_sidebar&&!fkit.original_body_collapsed){fkit.body_overflow()}});$(".modal").on("modalopened",function(){new ResizeSensor(fkit.modal_opened.$modal_internal,function(){var a=$(".modal .form");if(a.hasScrollBar().vertical){a.addClass("modal_scroll")}})});$(".modal").on("modalopened",function(){new ResizeSensor(fkit.modal_opened.$modal_internal,function(){var d=$(".modal .form");if(d.hasScrollBar().vertical){var b=$(window).height()-(d.outerHeight()+d.offset().top);var c=d[0].scrollHeight;var a=c-fkit.modal_scroll_height;if(b>a){$(".modal .form,.form .footer").css("bottom",parseInt(d.css("bottom"))-a)}}if(d.hasScrollBar().vertical){d.addClass("modal_scroll")}fkit.modal_height=$(fkit.modal_opened.settings["height-selector"]).length?$(fkit.modal_opened.settings["height-selector"]).outerHeight():$(".form .replace_form").outerHeight();fkit.modal_scroll_height=d[0].scrollHeight;fkit.render_modal_bottom()})})}});fkit.helper={};fkit.helper.selectCopyText=function(f,a,j,g){j=(typeof j!=="undefined")?j:function(e){};g=(typeof g!=="undefined")?g:function(){alert("Please press Ctrl/Cmd+C to copy")};function b(l){if(l){try{document.execCommand("copy");j(l)}catch(e){g()}}}var c=$(f.target);if(c.is("input:text")){c[0].select();if(a){b(c.val())}return}var k=c[0];if(document.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(k);d.select()}else{if(window.getSelection){var h=window.getSelection();var d=document.createRange();d.selectNodeContents(k);h.removeAllRanges();h.addRange(d)}}if(a){b(h.toString())}};fkit.helper.alert=function(b){var a=this;a.settings={};a.default_options={content:"",template:"info",display_location:"top",footer:"",time_displayed:4000,close_store_local_storage:false};$.extend(a.settings,a.default_options,b);a.closeAlert=function(){a.$alert.fadeOut()};a.showAlert=function(){$("body").append(a.$alert);a.$alert.attr("style","position: fixed; top: 1rem; left: 50%; margin-left: -400px; width: 800px; z-index: 9999999;");a.$alert.fadeIn();if(a.settings.time_displayed){setTimeout(function(){a.closeAlert()},a.settings.time_displayed)}};if(typeof a.settings.content==="string"){a.$alert=$("<div class='alert hide'>");a.$alert.html("<div>"+a.settings.content+"</div>");a.$alert.attr("data-alert",a.settings.template)}else{a.$alert=a.settings.content;a.$alert.addClass("hide")}a.$alert.on("click",".close-alert",function(c){c.preventDefault();a.closeAlert()});a.showAlert()};fkit.guidGenerator=function(){var a=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return("fc_"+a()+a()+""+a())};fkit.confirmationGeneratePopup=function(a,c,d,b){b=b||{};d=d||a.settings.deleteHeader;a.$th=a.$th||$(a);a.$content=fkit.fkit_delete_dialog.clone();a.$content[0].self=a;a.$content.find(".message").html(c);a.$content.find(".header").text(d);a.settings=$.extend(a.settings,{dropdownPositionContent:"center top+10",dropdownPositionParent:"center bottom"},b);a.$content.find(".yes").on("click",function(f){f.preventDefault();if(typeof a.settings.deleteCallback==="function"){fkit.modal_lock=false;a.settings.deleteCallback(a.$th)}else{if(typeof window[a.settings.deleteCallback]=="function"){window[a.settings.deleteCallback](a.$th)}else{if(a.$th.data("confirmtype")==="ajax"||a.$th.data("confirmtype")==="ajaxReload"||a.$th.data("confirmtype")==="ajaxPost"){ajaxRequest(a.settings.deleteCallback,"",function(){a.$th.parents("li").slideUp("slow").remove();a.$content.close_confirmation()},{type:a.$th.data("confirmtype")==="ajaxPost"?"POST":"GET"})}else{window.location=a.settings.deleteCallback}}}a.$content.close_confirmation()});a.$content.find(".no").on("click",function(f){f.preventDefault();a.$content.close_confirmation()});a.$content.appendTo("body");a.$content.show();a.$content.position({my:a.settings.dropdownPositionContent,at:a.settings.dropdownPositionParent,of:a.$th,collision:"custom"});setTimeout(function(){a.$content.addClass("is_active")},100);a.$content.close_confirmation=function(){a.$content.fadeOut("slow",function(){a.$content.remove();a.$content=null;fkit.modal_lock=false})}};fkit.confirmationAjaxGeneration=function(b){var d={};var c="";var a=b.$th;if(a.data("confirmtype")==="common"){c=url_to_current_unique+"/notifications/common_confirmation/archive"}else{if(a.data("confirmtype")==="delete"){c=url_to_current_unique+"/notifications/delete_item_confirmation/";d={item_id:a.data("item_id"),application_id:a.data("app_id"),project_id:a.data("proj_id"),sub_app_name:a.data("subapp_name")}}else{if(a.data("confirmtype")==="ajax"){var e=b.settings.deleteCallback.split("/");e.pop();e.push("delete_dialog");c=e.join("/")}else{if(a.data("confirmtype")!=="ajaxReload"&&a.data("confirmtype")!=="ajaxPost"){c=url_to_current_unique+"/notifications/common_confirmation/"+a.data("confirmtype")}}}}ajaxRequest(c,d,function(f){if(f.status=="success"){fkit.confirmationGeneratePopup(b,f.data.html)}})};fkit.initiateDropdown=function(a,c,b){b=b||{};a.$th=c;a.dropdown_lock=false;a.default_settings={dropdownAction:"click",dropdownAnimationDuration:"300ms",animateIn:"fadeIn",animateOut:"fadeOut",dropdownButton:".fkit_dropdown_activate",dropdownContent:".fkit_dropdown_content",dropdownOpenDelay:250,dropdownOpenedClass:"is_active",dropdownAnimationClass:"animated",dropdownCloseDelay:250,dropdownCloseButton:".fkit_dropdown_close",dropdownPositionContent:"right top",dropdownPositionParent:"right bottom",dropdownCallback:null,dropdownScriptRender:false,deleteHeader:typeof delete_confirm_lang!=="undefined"?delete_confirm_lang:"Are you sure?",deleteMessage:typeof permanently_delete_item!=="undefined"?permanently_delete_item:"You are about to delete this item permanently.",deleteCallback:null,deleteItemsNumber:1};a.new_settings=a.$th.data();a.settings=$.extend({},a.default_settings,a.new_settings,b);if(!a.settings.deleteCallback){a.$content=a.$th.find(a.settings.dropdownContent);a.$content.css({"animation-duration":a.settings.dropdownAnimationDuration})}a.$dropdown_button=a.$th.find(a.settings.dropdownButton).length?a.$th.find(a.settings.dropdownButton):a.$th;if(fc.isMobileVersion){a.$th.addClass("ios_no_highlight")}a.close_all_fkit_dropdowns=function(){$(".fkit_dropdown.is_active").each(function(){this.fkit_dropdown_close(true)})};$(document).keyup(function(d){if(d.keyCode===27){a.close_all_fkit_dropdowns()}});a.fkit_dropdown_close=function(d){if(a.dropdown_lock){return}a.dropdown_lock=true;if(d){a.$content.hide();a.$th.removeClass(a.settings.dropdownOpenedClass);a.dropdown_lock=false;return}a.$content.addClass(a.settings.animateOut);setTimeout(function(){a.$content.hide().removeClass(a.settings.dropdownAnimationClass+" "+a.settings.animateOut);a.$th.removeClass(a.settings.dropdownOpenedClass);a.dropdown_lock=false},parseInt(a.settings.dropdownAnimationDuration));if(a.settings.dropdownCallback&&typeof window[a.settings.dropdownCallback]==="function"){window[a.settings.dropdownCallback]("close")}};a.fkit_dropdown_open=function(){if($(this).data("dropdownAction")!=="hover"){a.close_all_fkit_dropdowns()}if(a.settings.dropdownScriptRender&&!a.scriptLoaded){a.scriptLoaded=true;a.$content.html($("#"+a.settings.dropdownScriptRender).html())}a.$th.addClass(a.settings.dropdownOpenedClass);if(a.settings.deleteCallback&&!$("body").find(a.$content).length){a.$content.appendTo("body")}a.$content.show();a.$content.position({my:a.settings.dropdownPositionContent,at:a.settings.dropdownPositionParent,of:a.$th,collision:"custom"}).addClass(a.settings.dropdownAnimationClass+" "+a.settings.animateIn);setTimeout(function(){a.$content.removeClass(a.settings.animateIn)},parseInt(a.settings.dropdownAnimationDuration));if(a.settings.dropdownCallback&&typeof window[a.settings.dropdownCallback]==="function"){window[a.settings.dropdownCallback]("open")}};a.fkit_dropdown_toggle_popup=function(){if(a.$th.hasClass(a.settings.dropdownOpenedClass)){a.fkit_dropdown_close()}else{a.fkit_dropdown_open()}};if(a.settings.deleteCallback){a.$th.on("click",function(d){d.preventDefault();if(a.$th.hasClass("disabled")){return}if(a.$content){a.$content.close_confirmation()}else{if(a.$th.data("confirmtype")&&a.$th.data("confirmtype")!=="ajaxReload"&&a.$th.data("confirmtype")!=="ajaxPost"){fkit.confirmationAjaxGeneration(a)}else{fkit.confirmationGeneratePopup(a,a.settings.deleteMessage,a.settings.deleteHeader)}}})}else{if(a.settings.dropdownAction==="click"||fc.isMobileVersion){a.$dropdown_button.on("click",function(d){d.preventDefault();a.fkit_dropdown_toggle_popup()});a.$th.on("click",a.settings.dropdownCloseButton,function(d){d.preventDefault();a.fkit_dropdown_close()})}else{if(a.settings.dropdownAction==="hover"){a.timeoutId;a.timeinId;a.$th.on({mouseenter:function(){clearTimeout(a.timeoutId);if(!a.$th.hasClass(a.settings.dropdownOpenedClass)){a.timeinId=setTimeout(function(){a.fkit_dropdown_open(a.$th,a.$content)},a.settings.dropdownOpenDelay)}},mouseleave:function(){clearTimeout(a.timeinId);a.timeoutId=setTimeout(function(){a.fkit_dropdown_close(a.$th,a.$content)},a.settings.dropdownCloseDelay)}})}}}a.$th.addClass("dropdowninitiated");return a};fkit.initiateModal=function(a,c,b){a.optional_settings=b||{};a.$th=c;a.data=a.$th.data();a.default_settings={backdrop:".lighten",window:".modal",content:".form","animation-time":"500","toggle-callback":false,"close-button":".cancel",width:false,href:false,"active-class":"is_active","height-selector":".form form","class":"","submit-type":"GET","addnew-norefresh":""};a.new_settings={};$.each(a.$th[0].attributes,function(e,d){if(this.specified&&d.name.indexOf("modal-")!==-1){a.new_settings[d.name.replace("modal-","")]=d.value}});a.settings=$.extend({},a.default_settings,a.new_settings,a.optional_settings,a.data);a.settings.href=a.data.fchref||a.settings.href;if(fc.isMobileVersion){a.$th.addClass("ios_no_highlight")}a.$modal=$(a.settings.window);a.$content=a.$modal.find(a.settings.content);a.$backdrop=$(a.settings.backdrop);a.fkit_modal_close=function(){if(fkit.modal_lock){return}clearTimeout(fkit.modal_temp_lock_timeout);fkit.modal_temp_lock=true;fkit.modal_lock=true;var d=fkit.modal_opened.$modal.find(".fkit_form")[0];if(typeof d!=="undefined"&&d.state==="filled"&&d.getAttribute("data-ignore-unsaved-changes")!="true"){$(".fkit_form .cancel")[0]["settings"]={deleteCallback:function(){fkit.modal_opened.$modal.find(".fkit_form")[0].state="ignored";fkit.modal_opened.fkit_modal_close();$(".dropdown-delete")[0].self.$content.close_confirmation()},deleteHeader:delete_confirm_lang};fkit.confirmationGeneratePopup($(".fkit_form .cancel")[0],unsaved_popup_str);return}if(a.modal_reload){location.reload();return}$("body").removeClass("show_modal");fkit.modal_opened.$modal.removeClass("pre_animation");fkit.modal_opened.$backdrop.css({"transition-delay":"0.3s"}).removeClass("pre_animation");fkit.modal_opened.$th.removeClass("btn-disabled is_active");fkit.modal_lock=true;setTimeout(function(){a.$modal.removeClass(a.settings["class"]);fkit.modal_opened.$modal.hide();fkit.modal_opened.$backdrop.hide().css({"transition-delay":"0s"});fkit.modal_opened.$content.html("");fkit.modal_opened.$modal.removeClass(fkit.modal_opened.settings["active-class"]);$(".modal .form, .form .footer").css({"margin-left":"-250px",width:"500px"});setTimeout(function(){fkit.modal_opened=false},100)},parseInt(fkit.modal_opened.settings["animation-time"]));$(".modal").trigger("modalclosed");if(fkit.modal_opened.settings["toggle-callback"]&&typeof window[fkit.modal_opened.settings["toggle-callback"]]==="function"){window[fkit.modal_opened.settings["toggle-callback"]]("close")}fkit.modal_lock=false};a.$modal[0].close_modal=a.fkit_modal_close;a.fkit_modal_open=function(d){if(fkit.modal_lock){return}fkit.modal_temp_lock=false;fkit.modal_temp_lock_timeout=setTimeout(function(){fkit.modal_temp_lock=true},7000);if(fkit.modal_opened){a.fkit_modal_close()}if(a.settings["class"]){a.$modal.addClass(a.settings["class"])}fkit.modal_lock=true;fkit.modal_opened=d;fkit.modal_opened.$th.addClass("btn-disabled is_active");if(a.settings.width){$(".modal .form").css({"margin-left":(-a.settings.width/2),width:a.settings.width})}a.$content.wrapInner("<div class='temp_ajax_loading'></div>");a.$content.find(".temp_ajax_loading").append(fkit.preloading_boxes.clone());a.$backdrop.show();a.$modal.show();setTimeout(function(){a.$backdrop.addClass("pre_animation");a.$modal.addClass("pre_animation");$("body").removeClass("scroll_bar_html");if($("html").hasScrollBar().vertical){$("body").addClass("scroll_bar_html")}$("body").addClass("show_modal")},150);a.$content.addClass("loading_content");a.$modal.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.$content.removeClass("pre_animation");a.$modal.addClass("is_active")});fc.ajax(true);a.ajaxLoad();if(a.settings["toggle-callback"]&&typeof window[a.settings["toggle-callback"]]==="function"){window[a.settings["toggle-callback"]]("open")}};a.ajaxLoad=function(){var d={};if(a.settings.ajaxdata){d=a.settings.ajaxdata}else{if(a.data.ajaxdata){d=a.data.ajaxdata}else{if(fc.getPageAjaxData){d=fc.getPageAjaxData()}}}ajaxRequest(fkit.modal_opened.settings.href,{data:d},function(e){var h="";if(a.modal_reload){if($(".modal .fkit_editor").length){CKEDITOR.instances[$(".modal .fkit_editor").attr("id")].destroy()}h=$('<div class="replace_form">'+e.data.html+"</div>");h.find(".footer").replaceWith(a.$content.find(".footer"));a.$content.find(".replace_form").replaceWith(h);a.$content.find(".error_group .field_message, .error_field .field_message, fieldset > .field_message").remove();a.$content.find(".error").removeClass("error");a.$content.find(".error_field").removeClass("error_field");a.$content.find(".error_group").removeClass("error_group");$("[autofocus]").focus();fkit.modal_lock=false}else{h=$(e.data.html.trim()).data(a.data);var f=$('<div class="replace_form"/>');f.append(h).attr("style",h.attr("style")?h.attr("style"):" transform: translate3d(-9000px,0,0);");$(".modal .form").append(f);var g=h.find(".fkit_editor");if(g.length){g.on("editorloaded",function(){a.loadForm(h)})}else{a.loadForm(h)}}},{type:a.settings["submit-type"],onError:function(e){if(!empty(e.message)){if(!empty(e.data)){if(!empty(e.data.error_source)&&e.data.error_source=="marketplace"){fc.displayError({title:"",content:e.message,error_id:""},8000)}else{fc.displayError({title:typeof smth_wrong_detailed_str!=="undefined"?smth_wrong_detailed_str:"Something has gone wrong. Issue: ",content:smth_wrong_sorry_str,error:e.message,error_id:e.data.error_id},8000)}}else{fc.displayError({title:smth_wrong_str,content:e.message,error:"",error_id:""},8000)}}fkit.modal_opened.fkit_modal_close()}})};a.loadForm=function(d){$(".replace_form").addClass("animated_content");$(".temp_ajax_loading").fadeOut("fast",function(){if(a.settings.width){$(".form .footer").css({"margin-left":(-a.settings.width/2),width:a.settings.width})}$(".replace_form").attr("style","").addClass("animated_visible");a.$content.removeClass("loading_content");$(this).remove();a.$modal_internal=$(a.settings["height-selector"]).length?$(a.settings["height-selector"]):$(".form .replace_form");fkit.modal_height=a.$modal_internal.outerHeight();if(!empty(a.data["class"])){$(".modal").addClass(a.data["class"])}fkit.render_modal_bottom();fkit.modal_scroll_height=$(".modal .form")[0].scrollHeight;$("[autofocus]").focus();if(a.callback||a.settings.callback){$(".modal .form").data("callback",a.callback||a.settings.callback)}else{$(".modal .form").removeData("callback");a.callback=null}if(typeof fc_tips!=="undefined"){fc_tips.create_not_created_tips().css("z-index",1000)}if(!$(".modal").hasClass("fkit_ignore")){fkit.initiatePlugins(".modal .form")}$(".modal").trigger("modalopened");fkit.modal_lock=false})};a.$th.on("click",function(d){d.preventDefault();d.stopPropagation();if(!fkit.modal_opened&&!a.$th.hasClass("btn-disabled")){a.fkit_modal_open(this)}});a.$modal.on("click",a.settings["close-button"],function(d){d.preventDefault();a.fkit_modal_close()});a.$th.addClass("modalinitiated");return a};fkit.render_modal_bottom=function(a){var d=$(window).height();var c=0;var b=0;if($(".form .footer").length){b=$(".form .footer").outerHeight()+50}else{b=85}if(a){fkit.modal_height=a.outerHeight();c=(d>fkit.modal_height)?d-fkit.modal_height+b:"1rem"}else{c=(d>fkit.modal_height+b)?d-(fkit.modal_height+b):"1rem"}$(".form").toggleClass("modal_scroll",c==="1rem");$(".modal .form,.form .footer").css({bottom:c})};function isInternetExplorer(){return(window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))}fkit.modal_close_by_cursor_position=function(e){if(!fkit.modal_temp_lock&&!isInternetExplorer()){if((typeof e.pageX==="undefined"||typeof e.pageY==="undefined")||(e.pageX===0&&e.pageY===0)){return}var b=fkit.modal_opened.$content.outerWidth();var c=fkit.modal_opened.$content.outerHeight();var a=fkit.modal_opened.$content.offset();var d={left:a.left,right:a.left+b,top:a.top,bottom:a.top+c};if(!((e.pageX>d.left&&e.pageX<d.right)&&(e.pageY<d.bottom&&e.pageY>d.top))&&!$(e.target).parents(".dropdown-delete").length&&!$(e.target).parents(".ui-multiselect-menu").length){fkit.modal_opened.fkit_modal_close()}}};fkit.open_modal=function(a){var b=fkit.initiateModal({},$("<div/>"),a);b.fkit_modal_open(b)};fkit.form_set_filled=function(a){a.$th.on("change editorchanged","input, textarea, .fkit_editor",function(b){a.state="filled";a.$th.off("change editorchanged","input, textarea, .fkit_editor")})};fkit.initiateForm=function(a,c,b){a.$th=c;b=b||{};a.state="pre_initialization";a.default_settings={};a.settings=$.extend(a.default_settings,typeof a.$th.data()!=="undefined"?a.$th.data():{},b);a.clearErrors=function(){a.$th.find(".error_group .field_message, .error_field .field_message, fieldset > .field_message, .error .field_message, .body > .field_message").remove();a.$th.find(".error").removeClass("error");a.$th.find(".error_field").removeClass("error_field");a.$th.find(".error_group").removeClass("error_group")};a.clearError=function(e){var d=e.parents(".error_group").length?e.parents(".error_group"):e.parents(".error_field");if(d.length){d.find(".error").removeClass("error");d.removeClass("error")}};a.processErrors=function(e){var d=[];a.clearErrors();if(typeof e.data!=="undefined"){d=e.data.errors}else{d=e}if(e.status==="error"&&typeof e.message!=="undefined"&&e.message!==""){a.renderError(a.$th,e.message,true);if($(".form form").length&&$(".body").length){$(".form").scrollTo(".body",800,30)}else{$("body,html").scrollTo("form.fkit_form",1000,50)}}else{$.each(d,function(h,j){var g="";var f="";if(isNaN(h)){g=h;f=j}else{g=j.field;f=j.error_message}if(g!==""&&f!==""&&g!=="global_error"){var k=(a.$th.find("[id='"+g+"']").length)?a.$th.find("[id='"+g+"']"):a.$th.find("[name='"+g+"']");a.renderError(k,f)}else{a.renderError(a.$th,f,true)}});if(a.$th.find(".error_field").first().length){if($(".form form").length){$(".form").scrollTo(a.$th.find(".error_field").first(),800,70)}else{$("body,html").scrollTo($(".error_field").first(),1000,50);if($(".error_field:first-of-type input").length){$(".error_field:first-of-type input").focus()}}}}a.$th.trigger("formSubmitFinished")};a.renderError=function(h,d,e){if(!e){var f=(h.parents(".group").length)?h.parents(".group"):h.closest("div").addClass("error");if(h.hasClass("bubble_block")){f=h}if(h.length&&f.is(":visible")){f.addClass("error_group");if(h.parents("field, .field, .bubble_block").length){var g=h.parents("field, .field, .bubble_block");g.addClass("error_field");g.append(fkit.$error_message.clone().html($.parseHTML(d)))}else{if(f.hasClass("bubble_block")){f.addClass("error_field");f.append(fkit.$error_message.clone().html($.parseHTML(d)))}else{h.after(fkit.$error_message.clone().html($.parseHTML(d)))}}h.addClass("error")}}else{if(h.find(".body").length){h.find(".body").prepend(fkit.$error_message.clone().html($.parseHTML(d)))}else{h.find("fieldset:first-of-type").prepend(fkit.$error_message.clone().html($.parseHTML(d)))}}};a.validateForm=function(){var e={};var d=false;a.$th.find("[data-validate]").each(function(f){var g=a.validateField($(this));if(g){$.extend(e,g);d=true}});return d?e:false};a.validateField=function(f){var h=f.val().trim();var d=f.data("validate");var g=(f.data("validation-message")?f.data("validation-message"):false);var e=(typeof f.attr("name")!=="undefined"?f.attr("name"):f.attr("id"));if(d.indexOf("required")!==-1&&!h.length){var j={};j[e]=g||"Required field.";return j}else{if(d.indexOf("email")!==-1&&!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(h)){var j={};j[e]=g||"Invalid email.";return j}}return false};a.handleFormSubmission=function(f){if(!a.settings.followAction){f.preventDefault()}a.clearErrors();var d=$(f.target)[0].validateForm();if(!$.isEmptyObject(d)){$(f.target)[0].processErrors(d);return false}return true};a.registerSubmission=function(){a.$th.one("submit",function(f){var d=$(this);if($(this).attr("data-ignore-form")){return}d[0].state="submitted";var g=$(this)[0].handleFormSubmission(f);d[0].fkit_errors=!g;return g})};a.registerSubmission();a.$th.on("formSubmitFinished",function(){$(this)[0].fkit_errors=false;a.registerSubmission()});fkit.form_set_filled(a);a.$th.on("reset",function(){a.state="reset";a.$th.trigger("reset_start");a.$th.find(".dateinitiated").each(function(){if(typeof $(this)[0].picker!=="undefined"){$(this)[0].picker.clear()}});a.$th.find(".editorinitiated").each(function(){if(typeof $(this)[0].instance!=="undefined"){$(this)[0].instance.setData("")}});a.$th.trigger("reset_end");a.state="initialized";fkit.form_set_filled(a)});a.$th.attr("novalidate","novalidate");a.$th.addClass("forminitiated");a.$th.trigger("formloaded");a.state="initialized";return a};fkit.initStartEndDateConstraints=function(e,d){var a=$(e);var c=$(d);var b=$.merge(a,c);b.on("fkitDateOpen",function(){if(a.val().length){c[0].picker.set("minDate",a.val())}if(c.val().length){a[0].picker.set("maxDate",c.val())}})};$(function(){fkit.helper.tester.tests={todos:{add_todo_modal:{page:"*",steps:[{select:".action_bar_right .fkit_modal",action:"click",time:600},{select:".form form input[type=submit]",action:"click",waitUntil:".form form"}]},manage_groups:{page:"*",steps:[{select:".dropdown-single .fkit_dropdown_activate",action:"click"},{select:".dropdown-list.animated li:first-child .load_popup",action:"click",time:300}]},manage_project_apps:{page:"*",steps:[{select:"#marketplace_add a",action:"click"}]}},dashboard:{picker:{page:"*",steps:[{select:".fc_toggle_project_picker",action:"click",time:600}]}},issue_tracker:{select_delete:{page:"*",steps:[{select:"#check_dropdown > a > .toggle",action:"click",time:600},{select:"#delete_selected",action:"click",time:100}]}},files:{upload_file:{page:"*",steps:[{select:".action_bar_right .btn:contains('Upload')",action:"click"},{select:".form form input[type=submit]",action:"click",waitUntil:".form form"}]}},milestones:{add_milestone:{page:"*",steps:[{select:".action_bar_right .btn:contains('Add Milestone')",action:"click",waitUntil:".action_bar_right .btn.modalinitiated:contains('Add Milestone')"},{select:".form form input[type=submit]",action:"click",waitUntil:".form form"}]}},passwords:{add_password:{page:"*",steps:[{select:".action_bar_right .btn:contains('Add Password')",action:"click"}]},add_password_modal:{page:"*",steps:[{select:".action_bar_right .btn:contains('Add Password')",action:"click",time:600},{select:".form form input[type=submit]",action:"click",time:1200}]}},custom_fields:{add_template:{page:"*",steps:[{select:".cft_add_new_button",action:"click",waitUntil:true},{select:".cft_add_template_group",action:"click",waitUntil:true}]}},projects:{create_from_template:{page:"*",steps:[{select:".dropdown-group[data-dropdown-action='hover'] a:first-of-type",action:"click"},{action:"runCode",code:'$("#step_1").hide(); $("#step_4").show();',waitUntil:".form form"}]}},wikis:{add:{page:"*",steps:[{select:".btn.btn-positive.fkit_modal",action:"click"}]}},widgets:{create_widget:{page:"*",steps:[{select:".fkit_modal:contains('Create Widget')",action:"click",time:300},{action:"runCode",code:'$("#app_type").val(1); $("#app_type").trigger("change");',time:1100}]}}};var a=fkit.helper.tester.tests});fkit.helper.tester=new (function(){var self=this;self.tests=[];self.add=function(arr){self.tests.push(arr)};self.runSteps=function(steps){$.each(steps,function(i,step){function runStep(){if(step.action==="click"){$(step.select).trigger(step.action);console.log("%c Ran:  $("+step.select+").trigger("+step.action+")","background-color:green; color:white;")}else{if(step.action==="runCode"){eval(step.code);console.log("%c Ran: code","background-color:green; color:white;")}}}if(step.waitUntil){$(typeof step.waitUntil==="string"?step.waitUntil:step.select).waitUntilExists(function(){runStep();console.log("%c Ran:  $("+step.select+").trigger("+step.action+")","background-color:green; color:white;")})}else{if(step.time){setTimeout(function(){runStep();steps.splice(i,1);self.runSteps(steps)},step.time);return false}else{runStep()}}})};self.run=function(test){var passed_tests=typeof test==="array"?test:test==="*"?self.tests:[test];$.each(passed_tests,function(test_index,test_run){console.log(":desc: ",test_run);self.runSteps(test_run.steps)})};self.waitUntil=function(){}});(function(e,c){var a={};var b=function(f){if(a[f]){c.clearInterval(a[f]);a[f]=null}};var d="waitUntilExists.found";e.fn.waitUntilExists=function(k,h,g){var f=this.selector;var l=e(f);var j=l.not(function(){return e(this).data(d)});if(k==="remove"){b(f)}else{j.each(k).data(d,true);if(h&&l.length){b(f)}else{if(!g){a[f]=c.setInterval(function(){l.waitUntilExists(k,h,true)},500)}}}return l}}(jQuery,window));(function(w){function g(){try{return b in w&&w[b]}catch(a){return !1}}var A={},j=w.document,b="localStorage",m="script",B;A.disabled=!1,A.set=function(c,a){},A.get=function(a){},A.remove=function(a){},A.clear=function(){},A.transact=function(f,h,c){var a=A.get(f);c==null&&(c=h,h=null),typeof a=="undefined"&&(a=h||{}),c(a),A.set(f,a)},A.getAll=function(){},A.forEach=function(){},A.serialize=function(a){return JSON.stringify(a)},A.deserialize=function(c){if(typeof c!="string"){return undefined}try{return JSON.parse(c)}catch(a){return c||undefined}};if(g()){B=w[b],A.set=function(a,c){return c===undefined?A.remove(a):(B.setItem(a,A.serialize(c)),c)},A.get=function(a){return A.deserialize(B.getItem(a))},A.remove=function(a){B.removeItem(a)},A.clear=function(){B.clear()},A.getAll=function(){var a={};return A.forEach(function(c,e){a[c]=e}),a},A.forEach=function(c){for(var f=0;f<B.length;f++){var a=B.key(f);c(a,A.get(a))}}}else{if(j.documentElement.addBehavior){var z,y;try{y=new ActiveXObject("htmlfile"),y.open(),y.write("<"+m+">document.w=window</"+m+'><iframe src="/favicon.ico"></iframe>'),y.close(),z=y.w.frames[0].document,B=z.createElement("div")}catch(v){B=j.createElement("div"),z=j.body}function k(a){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(B),z.appendChild(B),B.addBehavior("#default#userData"),B.load(b);var c=a.apply(A,e);return z.removeChild(B),c}}var x=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function q(a){return a.replace(/^d/,"___$&").replace(x,"___")}A.set=k(function(c,f,a){return f=q(f),a===undefined?A.remove(f):(c.setAttribute(f,A.serialize(a)),c.save(b),a)}),A.get=k(function(a,c){return c=q(c),A.deserialize(a.getAttribute(c))}),A.remove=k(function(c,a){a=q(a),c.removeAttribute(a),c.save(b)}),A.clear=k(function(f){var c=f.XMLDocument.documentElement.attributes;f.load(b);for(var h=0,a;a=c[h];h++){f.removeAttribute(a.name)}f.save(b)}),A.getAll=function(a){var c={};return A.forEach(function(h,f){c[h]=f}),c},A.forEach=k(function(h,l){var f=h.XMLDocument.documentElement.attributes;for(var a=0,c;c=f[a];++a){l(c.name,A.deserialize(h.getAttribute(c.name)))}})}}try{var d="__storejs__";A.set(d,d),A.get(d)!=d&&(A.disabled=!0),A.remove(d)}catch(v){A.disabled=!0}A.enabled=!A.disabled,typeof module!="undefined"&&module.exports&&this.module!==module?module.exports=A:typeof define=="function"&&define.amd?define(A):w.store=A})(Function("return this")());var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,c=function(f,e){f=String(f);e=e||2;while(f.length<e){f="0"+f}return f};return function(j,w,r){var g=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(j)=="[object String]"&&!/\d/.test(j)){w=j;j=undefined}j=j?new Date(j):new Date;if(isNaN(j)){throw SyntaxError("invalid date")}w=String(g.masks[w]||w||g.masks["default"]);if(w.slice(0,4)=="UTC:"){w=w.slice(4);r=true}var u=r?"getUTC":"get",n=j[u+"Date"](),e=j[u+"Day"](),k=j[u+"Month"](),q=j[u+"FullYear"](),t=j[u+"Hours"](),l=j[u+"Minutes"](),v=j[u+"Seconds"](),p=j[u+"Milliseconds"](),f=r?0:j.getTimezoneOffset(),h={d:n,dd:c(n),ddd:g.i18n.dayNames[e],dddd:g.i18n.dayNames[e+7],m:k+1,mm:c(k+1),mmm:g.i18n.monthNames[k],mmmm:g.i18n.monthNames[k+12],yy:String(q).slice(2),yyyy:q,h:t%12||12,hh:c(t%12||12),H:t,HH:c(t),M:l,MM:c(l),s:v,ss:c(v),l:c(p,3),L:c(p>99?Math.round(p/10):p),t:t<12?"a":"p",tt:t<12?"am":"pm",T:t<12?"A":"P",TT:t<12?"AM":"PM",Z:r?"UTC":(String(j).match(b)||[""]).pop().replace(d,""),o:(f>0?"-":"+")+c(Math.floor(Math.abs(f)/60)*100+Math.abs(f)%60,4),S:["th","st","nd","rd"][n%10>3?0:(n%100-n%10!=10)*n%10]};return w.replace(a,function(m){return m in h?h[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};eval(function(h,b,l,f,g,j){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(l--){j[g(l)]=f[l]||g(l)}f=[function(a){return j[a]}];g=function(){return"\\w+"};l=1}while(l--){if(f[l]){h=h.replace(new RegExp("\\b"+g(l)+"\\b","g"),f[l])}}return h}('(6($){$.9=6(m){b(m 1r Q)4 g(m);1c b(1n m=="M")4 g($.9.F(m));1c 4 g($.9.h(m))};3 $t=$.9;$.1B($.9,{y:{W:1z,16:1o,10:{X:C,18:C,13:"H",11:"1w 1x",H:C,14:C,j:"1L 1u a z",z:"u a z",e:"%d e",V:"u 1t V",c:"u %d c",D:"a D",7:"%d 7",I:"u a I",L:"%d L",K:"u a K",p:"%d p"}},g:6(q){3 $l=n.y.10;3 P=$l.X;3 N=$l.13||$l.H;b(n.y.16){b(q<0){P=$l.18;N=$l.11||$l.14}q=f.1y(q)}3 j=q/1H;3 e=j/G;3 c=e/G;3 7=c/17;3 p=7/19;3 1e=j<12&&5($l.j,f.O(j))||j<15&&5($l.z,1)||e<12&&5($l.e,f.O(e))||e<15&&5($l.V,1)||c<17&&5($l.c,f.O(c))||c<1E&&5($l.D,1)||7<Y&&5($l.7,f.J(7))||7<G&&5($l.I,1)||7<19&&5($l.L,f.J(7/Y))||p<2&&5($l.K,1)||5($l.p,f.J(p));4 $.R([P,1e,N].1v(" "))},F:6(w){3 s=$.R(w);s=s.o(/-/,"/").o(/-/,"/");s=s.o(/T/," ").o(/Z/," 1p");s=s.o(/([\\+-]\\d\\d)\\:?(\\d\\d)/," $1$2");4 1f Q(s)},h:6(v){3 1a=$(v).1I(0).1G.1A()==\'1h\';3 w=1a?$(v).U(\'h\'):$(v).U(\'1d\');4 $t.F(w)}});$.1D.9=6(){3 x=n;x.1k(S);3 $s=$t.y;b($s.W>0){1C(6(){x.1k(S)},$s.W)}4 x};6 S(){3 k=1l(n);b(!1F(k.h)){$(n).r(g(k.h))}4 n}6 1l(8){8=$(8);b(8.k("9")===1K){8.k("9",{h:$t.h(8)});3 r=$.R(8.r());b(r.1J>0)8.U("1d",r)}4 8.k("9")}6 g(B){4 $t.g(1b(B))}6 1b(B){4(1f Q().1g()-B.1g())}6 5(A,E){3 M=$.1m(A)?A(E):A;4 M.o(/%d/i,E)}1j.1i(\'1s\');1j.1i(\'1h\')})(1q);',62,110,"|||var|return|substitute|function|days|element|timeago||if|hours||minutes|Math|inWords|datetime||seconds|data||timestamp|this|replace|years|distanceMillis|text|||about|elem|iso8601|self|settings|minute|stringOrFunction|date|null|day|value|parse|60|ago|month|floor|year|months|string|suffix|round|prefix|Date|trim|refresh||attr|hour|refreshMillis|prefixAgo|30||strings|suffixFromNow|45|suffixAgo|fromNow|90|allowFuture|24|prefixFromNow|365|isTime|distance|else|title|words|new|getTime|time|createElement|document|each|prepareData|isFunction|typeof|false|UTC|jQuery|instanceof|abbr|an|than|join|from|now|abs|60000|toLowerCase|extend|setInterval|fn|48|isNaN|tagName|1000|get|length|undefined|less".split("|"),0,{}));if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){fc.isMobileVersion=true;$("body").addClass("fc_mobile").removeClass("fc_side_minimized_hide");$(function(){fkit.destroyPlugins()});ckeditor_standard_options=ckeditor_advanced_options={toolbar:[["Bold","Italic","Underline","Link","RemoveFormat"]],uiColor:"#F0F0F0",autoGrow_onStartup:false,resize_enabled:false,autoGrow_bottomSpace:"0",autoGrow_maxHeight:180,height:"180px",width:"95%",fillEmptyBlocks:false,IgnoreEmptyParagraphValue:true,AutoParagraph:false,indentClasses:["ck_indent1","ck_indent2","ck_indent3"],contentsCss:[CKEDITOR_BASEPATH+"contents.css?ver=2",cdn_url+"platform/css/editor.css"],disableNativeSpellChecker:false,removePlugins:ckeditor_remove_plugins,extraAllowedContent:ckeditor_extra_allowed_content};$(function(){$(document).on("tap",".td_group .td .td_content",function(a){a.preventDefault();window.location=$(this).find(".tag_comments").attr("href")})});$(".tip").each(function(a){$(this).removeClass("tip")});if(!!window.navigator.standalone){$("#applications .active a").removeAttr("href");$("a").on("mouseenter click",function(b){var a=$(this).attr("href");if(!(typeof a==="undefined")&&!$(this).hasClass("fc_project_link")){b.preventDefault();window.location=a}})}}$(function(){function a(){if($(window).width()<767){fc.isMobileVersion=true;$("body").addClass("fc_mobile");fkit.destroyPlugins()}else{fc.isMobileVersion=false;$("body").removeClass("fc_mobile");fkit.initiatePlugins()}}a();$(window).resize(a)});